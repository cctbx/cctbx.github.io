
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Installation overview &#8212; CCTBX Developer documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tour of the cctbx" href="tour.html" />
    <link rel="prev" title="Computational Crystallography Toolbox" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tour.html" title="Tour of the cctbx"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Computational Crystallography Toolbox"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CCTBX Developer documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Installation overview</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <nav class="contents" id="table-of-contents" role="doc-toc">
<span id="installation"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#installation-overview" id="id1">Installation overview</a></p></li>
<li><p><a class="reference internal" href="#manually-building-from-sources-under-linux-and-macos" id="id2">Manually building from sources under Linux and macOS</a></p></li>
<li><p><a class="reference internal" href="#manually-building-from-sources-under-windows-2000-or-higher" id="id3">Manually building from sources under Windows 2000 or higher</a></p></li>
</ul>
</nav>
<section id="installation-overview">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">Installation overview</a><a class="headerlink" href="#installation-overview" title="Permalink to this heading">¶</a></h1>
<p>Periodically, the most recent cctbx source code including all its
dependencies is automatically exported from the source code repositories
(git) and bundled into compressed binary installers that are published
at:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="http://cci.lbl.gov/cctbx_build/">http://cci.lbl.gov/cctbx_build/</a></p></li>
</ul>
</div></blockquote>
<p>This web page provides compressed binary distributions for a
variety of platforms. It is most convenient to use these binary bundles
if possible. Installation is very simple and fast. After uncompressing the
bundle, run the <code class="docutils literal notranslate"><span class="pre">install</span> <span class="pre">--prefix=&lt;installation</span> <span class="pre">location&gt;</span></code> command to
install on macOS and Linux. On Windows, uncompressing the zip file will provide
a working copy of cctbx. There is not installation script.</p>
</section>
<section id="manually-building-from-sources-under-linux-and-macos">
<h1><a class="toc-backref" href="#id2" role="doc-backlink">Manually building from sources under Linux and macOS</a><a class="headerlink" href="#manually-building-from-sources-under-linux-and-macos" title="Permalink to this heading">¶</a></h1>
<p>Please note: <strong>The following instructions are for developers!</strong></p>
<p>Building from sources requires Python 2.7, 3.6 or newer and a C++
compiler. If you like to use the most recent Python, it can be
installed in the following way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">xf</span> <span class="n">Python</span><span class="o">-</span><span class="mf">2.7.13</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
<span class="n">cd</span> <span class="n">Python</span><span class="o">-</span><span class="mf">2.7.13</span>
<span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">your</span><span class="o">/</span><span class="n">choice</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>It may be convenient (but is not required) to add the directory
<code class="docutils literal notranslate"><span class="pre">/your/choice/bin</span></code> to the command-line search <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, e.g. using
<code class="docutils literal notranslate"><span class="pre">csh</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>set path=(/your/choice/bin $path)
</pre></div>
</div>
<p>Recent cctbx sources are available from the cctbx <a class="reference external" href="https://github.com/cctbx/cctbx_project/">GitHub</a> repository. To
download the repository and build cctbx, use bootstrap.py:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">&lt;</span><span class="n">installation</span> <span class="n">directory</span><span class="o">&gt;</span>
<span class="n">cd</span> <span class="o">&lt;</span><span class="n">installation</span> <span class="n">directory</span><span class="o">&gt;</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cctbx</span><span class="o">/</span><span class="n">cctbx_project</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">libtbx</span><span class="o">/</span><span class="n">auto_build</span><span class="o">/</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">py</span>
<span class="n">python</span> <span class="o">./</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>On macOS, since <code class="docutils literal notranslate"><span class="pre">wget</span></code> is not available by default, use <code class="docutils literal notranslate"><span class="pre">curl</span></code> instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cctbx</span><span class="o">/</span><span class="n">cctbx_project</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">libtbx</span><span class="o">/</span><span class="n">auto_build</span><span class="o">/</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">py</span> <span class="o">&gt;</span> <span class="n">bootstrap</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>After some time, this creates the subdirectories <code class="docutils literal notranslate"><span class="pre">base</span></code>, <code class="docutils literal notranslate"><span class="pre">base_tmp</span></code>,
<code class="docutils literal notranslate"><span class="pre">build</span></code>, and <code class="docutils literal notranslate"><span class="pre">modules</span></code>. The <code class="docutils literal notranslate"><span class="pre">base</span></code> directory contains dependencies for
cctbx, <code class="docutils literal notranslate"><span class="pre">base_tmp</span></code> is a temporary directory for compiling dependencies (can be
deleted), <code class="docutils literal notranslate"><span class="pre">build</span></code> contains the compiled cctbx code, and <code class="docutils literal notranslate"><span class="pre">modules</span></code> contains
the source code for cctbx. To keep <code class="docutils literal notranslate"><span class="pre">bootstrap.py</span></code> in your
<code class="docutils literal notranslate"><span class="pre">&lt;installation</span> <span class="pre">directory&gt;</span></code> up-to-date with the version in <code class="docutils literal notranslate"><span class="pre">modules</span></code>, you
can create a symbolic link to that version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">installation</span> <span class="n">directory</span><span class="o">&gt;</span>
<span class="n">rm</span> <span class="n">bootstrap</span><span class="o">.</span><span class="n">py</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">./</span><span class="n">modules</span><span class="o">/</span><span class="n">cctbx_project</span><span class="o">/</span><span class="n">libtbx</span><span class="o">/</span><span class="n">auto_build</span><span class="o">/</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Within the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory, cctbx creates a
file <code class="docutils literal notranslate"><span class="pre">setpaths.csh</span></code> (among others). This file must be used to
initialize a new shell or process with the cctbx settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">setpaths</span><span class="o">.</span><span class="n">csh</span>
</pre></div>
</div>
<p>There is also a <code class="docutils literal notranslate"><span class="pre">setpaths.sh</span></code> for <code class="docutils literal notranslate"><span class="pre">bash</span></code> users.</p>
<p>To update your cctbx installation to the latest version, you can just run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">./</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>again in the <code class="docutils literal notranslate"><span class="pre">&lt;installation</span> <span class="pre">directory&gt;</span></code>. This will update the source code in
the <code class="docutils literal notranslate"><span class="pre">modules</span></code> directory and recompile the changes (if necessary) in
<code class="docutils literal notranslate"><span class="pre">build</span></code>. Occasionally, dependencies in <code class="docutils literal notranslate"><span class="pre">base</span></code> are updated. When this
happens, just delete the <code class="docutils literal notranslate"><span class="pre">base</span></code> and <code class="docutils literal notranslate"><span class="pre">base_tmp</span></code> directories and rerun
the <code class="docutils literal notranslate"><span class="pre">bootstrap.py</span></code> command.</p>
<p>To compile any local changes to the source code, enter the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory
and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
<p>This will actually run the <code class="docutils literal notranslate"><span class="pre">libtbx.scons</span></code> command using all
available CPUs. You can also manually specify the number of CPUs to
use, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libtbx</span><span class="o">.</span><span class="n">scons</span> <span class="o">-</span><span class="n">j</span> <span class="mi">4</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">libtbx.scons</span></code> is just a thin wrapper around <a class="reference external" href="http://www.scons.org/">SCons</a>. The
<a class="reference external" href="http://www.scons.org/doc/HTML/scons-man.html">SCons documentation</a> applies without modification.</p>
<p>To run scripts with cctbx imports use the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libtbx</span><span class="o">.</span><span class="n">python</span> <span class="n">your_script</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>(You can also use <code class="docutils literal notranslate"><span class="pre">scitbx.python</span></code>, <code class="docutils literal notranslate"><span class="pre">cctbx.python</span></code>, <code class="docutils literal notranslate"><span class="pre">iotbx.python</span></code>, etc.;
all these commands are equivalent.)</p>
<p>For example, to run some regression tests after the compilation is
finished enter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>source build/setpaths_all.csh
libtbx.python $SCITBX_DIST/run_tests.py
libtbx.python $CCTBX_DIST/run_tests.py --Quick
</pre></div>
</div>
<p>The output should show many OK. A Python Traceback is an indicator
for problems.</p>
</section>
<section id="manually-building-from-sources-under-windows-2000-or-higher">
<h1><a class="toc-backref" href="#id3" role="doc-backlink">Manually building from sources under Windows 2000 or higher</a><a class="headerlink" href="#manually-building-from-sources-under-windows-2000-or-higher" title="Permalink to this heading">¶</a></h1>
<p>The cctbx installation requires Visual C++ 8.0 (Visual Studio .NET
2005) or higher.</p>
<p>To install Python under Windows it is best to use a binary
installer from the <a class="reference external" href="http://www.python.org/download/">Python download page</a>.
The default choices presented by the installation wizard are usually fine.</p>
<p>Recent self-contained cctbx sources are available in the
self-extracting file
<a class="reference external" href="http://cci.lbl.gov/cctbx_build/results/last_published/cctbx_bundle.exe">cctbx_bundle.exe</a>
published at the cctbx build page. To unpack this file in a new, empty
directory enter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cctbx_bundle</span><span class="o">.</span><span class="n">exe</span>
</pre></div>
</div>
<p>This creates a subdirectory <code class="docutils literal notranslate"><span class="pre">cctbx_sources</span></code>. The installation
procedure should be executed in another directory, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">cctbx_build</span>
<span class="n">cd</span> <span class="n">cctbx_build</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">python27</span>\<span class="n">python</span><span class="o">.</span><span class="n">exe</span> <span class="o">..</span>\<span class="n">cctbx_sources</span>\<span class="n">libtbx</span>\<span class="n">configure</span><span class="o">.</span><span class="n">py</span> <span class="n">mmtbx</span>
</pre></div>
</div>
<p>The last command initializes the <code class="docutils literal notranslate"><span class="pre">cctbx_build</span></code> directory and creates
a file <code class="docutils literal notranslate"><span class="pre">setpaths.bat</span></code> (among others). This file must be used to
initialize a new shell or process with the cctbx settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">setpaths</span><span class="o">.</span><span class="n">bat</span>
</pre></div>
</div>
<p>To compile enter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libtbx</span><span class="o">.</span><span class="n">scons</span>
</pre></div>
</div>
<p>On a machine with multiple CPUs enter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libtbx</span><span class="o">.</span><span class="n">scons</span> <span class="o">-</span><span class="n">j</span> <span class="n">N</span>
</pre></div>
</div>
<p>where N is the number of CPUs available.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">libtbx.scons</span></code> is just a thin wrapper around <a class="reference external" href="http://www.scons.org/">SCons</a>. The
<a class="reference external" href="http://www.scons.org/doc/HTML/scons-man.html">SCons documentation</a> applies without modification.</p>
<p>To run scripts with cctbx imports use the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libtbx</span><span class="o">.</span><span class="n">python</span> <span class="n">your_script</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>(You can also use <code class="docutils literal notranslate"><span class="pre">scitbx.python</span></code>, <code class="docutils literal notranslate"><span class="pre">cctbx.python</span></code>, <code class="docutils literal notranslate"><span class="pre">iotbx.python</span></code>, etc.;
all these commands are equivalent.)</p>
<p>For example, to run some regression tests after the compilation is
finished enter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">setpaths_all</span><span class="o">.</span><span class="n">bat</span>
<span class="n">libtbx</span><span class="o">.</span><span class="n">python</span> <span class="o">%</span><span class="n">SCITBX_DIST</span><span class="o">%</span>\<span class="n">run_tests</span><span class="o">.</span><span class="n">py</span>
<span class="n">libtbx</span><span class="o">.</span><span class="n">python</span> <span class="o">%</span><span class="n">CCTBX_DIST</span><span class="o">%</span>\<span class="n">run_tests</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">Quick</span>
</pre></div>
</div>
<p>The output should show many OK. A Python Traceback is an indicator
for problems.</p>
<p><a class="reference external" href="introduction.html">Back</a></p>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Installation overview</a></li>
<li><a class="reference internal" href="#manually-building-from-sources-under-linux-and-macos">Manually building from sources under Linux and macOS</a></li>
<li><a class="reference internal" href="#manually-building-from-sources-under-windows-2000-or-higher">Manually building from sources under Windows 2000 or higher</a></li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="index.html"
                          title="previous chapter">Computational Crystallography Toolbox</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="tour.html"
                          title="next chapter">Tour of the cctbx</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tour.html" title="Tour of the cctbx"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Computational Crystallography Toolbox"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CCTBX Developer documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Installation overview</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, University of California.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
    </div>
  </body>
</html>