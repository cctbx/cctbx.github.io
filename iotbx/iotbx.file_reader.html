<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>iotbx.file_reader - generic file input &#8212; CCTBX Developer documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=def86cc0" />
    
    <script src="../_static/documentation_options.js?v=9c77bcdb"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="iotbx.cif" href="iotbx.cif.html" />
    <link rel="prev" title="iotbx.managers" href="iotbx.managers.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="iotbx.cif.html" title="iotbx.cif"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="iotbx.managers.html" title="iotbx.managers"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CCTBX Developer documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">iotbx - file readers and writers</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">iotbx.file_reader - generic file input</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="iotbx-file-reader-generic-file-input">
<h1>iotbx.file_reader - generic file input<a class="headerlink" href="#iotbx-file-reader-generic-file-input" title="Link to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">iotbx.file_reader</span></code> module is intended to provide a single entry point
for reading most common crystallographic file formats.  This allows the
programmer to use the underlying input functions without needing to know the
specific APIs in detail, although the resulting objects will still be
format-specific.  It is also designed to support automatic file type
determination, first by guessing the format based on the file extension, then
by trying a succession of input methods until one finishes without an error.
This facility is used both for processing command-line arguments (especially
via the <code class="xref py py-mod docutils literal notranslate"><span class="pre">iotbx.phil</span></code> extensions), and for handling file input in the
Phenix GUI.</p>
<p>In the simplest case, reading a file requires only a single method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">iotbx.file_reader</span> <span class="kn">import</span> <span class="n">any_file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_file</span> <span class="o">=</span> <span class="n">any_file</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_data</span> <span class="o">=</span> <span class="n">input_file</span><span class="o">.</span><span class="n">file_object</span>
</pre></div>
</div>
<p>Note that if the extension does not imply a particular format to try first, or
if parsing using the appropriate module fails due to corrupted file data, this
may be more inefficient than explicitly specifying the file
type, and should be used only when the format is not known in advance.  You
can alternately specify which input module to use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pdb_in</span> <span class="o">=</span> <span class="n">any_file</span><span class="p">(</span><span class="s2">&quot;model.pdb&quot;</span><span class="p">,</span> <span class="n">force_type</span><span class="o">=</span><span class="s2">&quot;pdb&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pdb_in</span><span class="o">.</span><span class="n">assert_file_type</span><span class="p">(</span><span class="s2">&quot;pdb&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span> <span class="o">=</span> <span class="n">pdb_in</span><span class="o">.</span><span class="n">file_object</span><span class="o">.</span><span class="n">construct_hierarchy</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mtz_in</span> <span class="o">=</span> <span class="n">any_file</span><span class="p">(</span><span class="s2">&quot;data.mtz&quot;</span><span class="p">,</span> <span class="n">force_type</span><span class="o">=</span><span class="s2">&quot;hkl&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">miller_arrays</span> <span class="o">=</span> <span class="n">mtz_in</span><span class="o">.</span><span class="n">file_server</span><span class="o">.</span><span class="n">miller_arrays</span>
</pre></div>
</div>
<p>This will skip the automatic format detection and only try the specified
input method.  Several options are available for error handling; the default
behavior when <code class="docutils literal notranslate"><span class="pre">force_type</span></code> is set is to pass through any exceptions
encountered when calling the underlying input method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">iotbx.file_reader</span> <span class="kn">import</span> <span class="n">any_file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">any_file</span><span class="p">(</span><span class="s2">&quot;model.pdb&quot;</span><span class="p">,</span> <span class="n">force_type</span><span class="o">=</span><span class="s2">&quot;hkl&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;/Users/nat/src/cctbx_project/iotbx/file_reader.py&quot;</span>, line <span class="m">197</span>, in <span class="n">any_file</span>
<span class="w">    </span><span class="n">raise_sorry_if_not_expected_format</span><span class="o">=</span><span class="n">raise_sorry_if_not_expected_format</span><span class="p">)</span>
  File <span class="nb">&quot;/Users/nat/src/cctbx_project/iotbx/file_reader.py&quot;</span>, line <span class="m">251</span>, in <span class="n">__init__</span>
<span class="w">    </span><span class="n">read_method</span><span class="p">()</span>
  File <span class="nb">&quot;/Users/nat/src/cctbx_project/iotbx/file_reader.py&quot;</span>, line <span class="m">341</span>, in <span class="n">_try_as_hkl</span>
<span class="w">    </span><span class="k">assert</span> <span class="p">(</span><span class="n">hkl_file</span><span class="o">.</span><span class="n">file_type</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">),</span> <span class="s2">&quot;Not a valid reflections file.&quot;</span>
<span class="gr">AssertionError</span>: <span class="n">Not a valid reflections file.</span>
</pre></div>
</div>
<p>This is fine for internal use when an unexpected file parsing error is likely
to be a bug in the code, but less suitable when processing user input.
Alternately, a <code class="xref py py-class docutils literal notranslate"><span class="pre">libtbx.utils.Sorry</span></code> exception may be raised instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">any_file</span><span class="p">(</span><span class="s2">&quot;model.pdb&quot;</span><span class="p">,</span> <span class="n">force_type</span><span class="o">=</span><span class="s2">&quot;hkl&quot;</span><span class="p">,</span> <span class="n">raise_sorry_if_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Sorry: Couldn&#39;t read &#39;model.pdb&#39; as file type &#39;hkl&#39;: Not a valid reflections file.</span>
</pre></div>
</div>
<p>For PDB, MTZ, and CIF files (the most commonly used formats in macromolecular
crystallograph), it is also possible to get similar behavior by treating the
file extension as an implicit replacement for <code class="docutils literal notranslate"><span class="pre">force_type</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">iotbx.file_reader</span> <span class="kn">import</span> <span class="n">any_file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">any_file</span><span class="p">(</span><span class="s2">&quot;model.sca&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">f</span><span class="o">.</span><span class="n">file_type</span>
<span class="go">pdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">any_file</span><span class="p">(</span><span class="s2">&quot;model.sca&quot;</span><span class="p">,</span> <span class="n">raise_sorry_if_not_expected_format</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Sorry: File format error:</span>
<span class="go">Not a valid reflections file.</span>
</pre></div>
</div>
<p>The allowed file types are specified in the module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">standard_file_descriptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;pdb&#39;</span>  <span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span>
  <span class="s1">&#39;hkl&#39;</span>  <span class="p">:</span> <span class="s2">&quot;Reflections&quot;</span><span class="p">,</span>
  <span class="s1">&#39;cif&#39;</span>  <span class="p">:</span> <span class="s2">&quot;Restraints&quot;</span><span class="p">,</span>
  <span class="s1">&#39;seq&#39;</span>  <span class="p">:</span> <span class="s2">&quot;Sequence&quot;</span><span class="p">,</span>
  <span class="s1">&#39;xplor_map&#39;</span>  <span class="p">:</span> <span class="s2">&quot;XPLOR map&quot;</span><span class="p">,</span>
  <span class="s1">&#39;ccp4_map&#39;</span> <span class="p">:</span> <span class="s2">&quot;CCP4 map&quot;</span><span class="p">,</span>
  <span class="s1">&#39;phil&#39;</span> <span class="p">:</span> <span class="s2">&quot;Parameters&quot;</span><span class="p">,</span>
  <span class="s1">&#39;xml&#39;</span>  <span class="p">:</span> <span class="s2">&quot;XML&quot;</span><span class="p">,</span>
  <span class="s1">&#39;pkl&#39;</span>  <span class="p">:</span> <span class="s2">&quot;Python pickle&quot;</span><span class="p">,</span>
  <span class="s1">&#39;txt&#39;</span>  <span class="p">:</span> <span class="s2">&quot;Text&quot;</span><span class="p">,</span>
  <span class="s1">&#39;mtz&#39;</span>  <span class="p">:</span> <span class="s2">&quot;Reflections (MTZ)&quot;</span><span class="p">,</span>
  <span class="s1">&#39;aln&#39;</span>  <span class="p">:</span> <span class="s2">&quot;Sequence alignment&quot;</span><span class="p">,</span>
  <span class="s1">&#39;hhr&#39;</span>  <span class="p">:</span> <span class="s2">&quot;HHpred alignment&quot;</span><span class="p">,</span>
  <span class="s1">&#39;img&#39;</span>  <span class="p">:</span> <span class="s2">&quot;Detector image&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>However, in most cases only a subset of these will be tried automatically.</p>
<section id="module-iotbx.file_reader">
<span id="api-documentation"></span><h2>API documentation<a class="headerlink" href="#module-iotbx.file_reader" title="Link to this heading">¶</a></h2>
<p>Generic file input module, used in Phenix GUI and elsewhere.  This trades some
loss of efficiency for a simplified API for loading any file type more or less
automatically.  It will first try to guess the format based on the extension;
if this fails, it will then try other formats.  This is used on the command
line and the Phenix GUI to process bulk file input.  In most other cases a
specific file type is desired, and the force_type argument will ensure that
only this format is attempted.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">iotbx.file_reader</span> <span class="kn">import</span> <span class="n">any_file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_file</span> <span class="o">=</span> <span class="n">any_file</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_data</span> <span class="o">=</span> <span class="n">input_file</span><span class="o">.</span><span class="n">file_object</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pdb_in</span> <span class="o">=</span> <span class="n">any_file</span><span class="p">(</span><span class="s2">&quot;model.pdb&quot;</span><span class="p">,</span> <span class="n">force_type</span><span class="o">=</span><span class="s2">&quot;pdb&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pdb_in</span><span class="o">.</span><span class="n">assert_file_type</span><span class="p">(</span><span class="s2">&quot;pdb&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span> <span class="o">=</span> <span class="n">pdb_in</span><span class="o">.</span><span class="n">file_object</span><span class="o">.</span><span class="n">hierarchy</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mtz_in</span> <span class="o">=</span> <span class="n">any_file</span><span class="p">(</span><span class="s2">&quot;data.mtz&quot;</span><span class="p">,</span> <span class="n">force_type</span><span class="o">=</span><span class="s2">&quot;hkl&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">miller_arrays</span> <span class="o">=</span> <span class="n">mtz_in</span><span class="o">.</span><span class="n">file_server</span><span class="o">.</span><span class="n">miller_arrays</span>
</pre></div>
</div>
<dl class="py exception">
<dt class="sig sig-object py" id="iotbx.file_reader.FormatError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">FormatError</span></span><a class="headerlink" href="#iotbx.file_reader.FormatError" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Sorry</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file">
<span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">any_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_processed_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['pdb',</span> <span class="pre">'hkl',</span> <span class="pre">'cif',</span> <span class="pre">'pkl',</span> <span class="pre">'ncs',</span> <span class="pre">'seq',</span> <span class="pre">'phil',</span> <span class="pre">'aln',</span> <span class="pre">'a3m',</span> <span class="pre">'txt',</span> <span class="pre">'xplor_map',</span> <span class="pre">'ccp4_map']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extensions_absolutely_defining_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['ccp4',</span> <span class="pre">'mrc']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_directories</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_sorry_if_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_sorry_if_not_expected_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file" title="Link to this definition">¶</a></dt>
<dd><p>Main input method, wrapper for any_file_input class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> – path to file (relative or absolute)</p></li>
<li><p><strong>get_processed_file</strong> – TODO</p></li>
<li><p><strong>valid_types</strong> – file types to consider</p></li>
<li><p><strong>allow_directories</strong> – process directory if given as file_name</p></li>
<li><p><strong>force_type</strong> – read as this format, don’t try any others</p></li>
<li><p><strong>input_class</strong> – optional substitute for any_file_input, with additional
parsers</p></li>
<li><p><strong>raise_sorry_if_errors</strong> – raise a Sorry exception if parsing fails (used
with force_type)</p></li>
<li><p><strong>raise_sorry_if_not_expected_format</strong> – raise a Sorry exception if the
file extension does not match the parsed file type</p></li>
<li><p><strong>extensions_absolutely_defining_type</strong> – if the file has one of these
extensions, only try the associated file type</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>any_file_input object, or an instance of the input_class param</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_fast">
<span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">any_file_fast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_processed_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['pdb',</span> <span class="pre">'hkl',</span> <span class="pre">'cif',</span> <span class="pre">'pkl',</span> <span class="pre">'ncs',</span> <span class="pre">'seq',</span> <span class="pre">'phil',</span> <span class="pre">'aln',</span> <span class="pre">'a3m',</span> <span class="pre">'txt',</span> <span class="pre">'xplor_map',</span> <span class="pre">'ccp4_map']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_directories</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file_fast" title="Link to this definition">¶</a></dt>
<dd><p>mimics any_file, but without parsing - will instead guess the file type from
the extension.  for most output files produced by cctbx/phenix this is
relatively safe; for files of unknown provenance it is less effective.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_fast_input">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">any_file_fast_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_types</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file_fast_input" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">any_file_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_processed_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_sorry_if_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_sorry_if_not_expected_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file_input" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Container for file data of any supported type.  Usually obtained via the
any_file() function rather than being instantiated directly.</p>
<dl class="py method">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.assert_file_type">
<span class="sig-name descname"><span class="pre">assert_file_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file_input.assert_file_type" title="Link to this definition">¶</a></dt>
<dd><p>Verify that the automatically determined file type is the expected format.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.check_file_type">
<span class="sig-name descname"><span class="pre">check_file_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiple_formats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file_input.check_file_type" title="Link to this definition">¶</a></dt>
<dd><p>Verify that the automatically determined file type is the expected format,
with the option to consider multiple formats.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.crystal_symmetry">
<span class="sig-name descname"><span class="pre">crystal_symmetry</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file_input.crystal_symmetry" title="Link to this definition">¶</a></dt>
<dd><p>Extract the crystal symmetry (if any).  Only valid for model (PDB/mmCIF)
and reflection files.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.file_content">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">file_content</span></span><a class="headerlink" href="#iotbx.file_reader.any_file_input.file_content" title="Link to this definition">¶</a></dt>
<dd><p>Return the underlying format-specific object containing file data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.file_info">
<span class="sig-name descname"><span class="pre">file_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_file_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file_input.file_info" title="Link to this definition">¶</a></dt>
<dd><p>Format a string containing the file type and size.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.file_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">file_name</span></span><a class="headerlink" href="#iotbx.file_reader.any_file_input.file_name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.file_object">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">file_object</span></span><a class="headerlink" href="#iotbx.file_reader.any_file_input.file_object" title="Link to this definition">¶</a></dt>
<dd><p>Synonym for file_content()</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.file_server">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">file_server</span></span><a class="headerlink" href="#iotbx.file_reader.any_file_input.file_server" title="Link to this definition">¶</a></dt>
<dd><p>For reflection files only, returns an
<code class="xref py py-class docutils literal notranslate"><span class="pre">iotbx.reflection_file_utils.reflection_file_server</span></code> object
containing the extracted Miller arrays.  Note that this will implicitly
merge any non-unique observations.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.file_type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">file_type</span></span><a class="headerlink" href="#iotbx.file_reader.any_file_input.file_type" title="Link to this definition">¶</a></dt>
<dd><p>Return a string representing the generic data type, for example ‘pdb’ or
‘hkl’.  Note that this is not necessarily the same as the underlying
format, for example ‘pdb’ can mean either PDB or mmCIF format, and ‘hkl’
could mean MTZ, CIF, XDS, Scalepack, or SHELX format.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.set_file_type">
<span class="sig-name descname"><span class="pre">set_file_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file_input.set_file_type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.show_summary">
<span class="sig-name descname"><span class="pre">show_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file_input.show_summary" title="Link to this definition">¶</a></dt>
<dd><p>Print out some basic information about the file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="iotbx.file_reader.any_file_input.try_all_types">
<span class="sig-name descname"><span class="pre">try_all_types</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.any_file_input.try_all_types" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="iotbx.file_reader.directory_input">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">directory_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.directory_input" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="iotbx.file_reader.directory_input.file_info">
<span class="sig-name descname"><span class="pre">file_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_file_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.directory_input.file_info" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="iotbx.file_reader.find_closest_base_name">
<span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">find_closest_base_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">templates</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.find_closest_base_name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="iotbx.file_reader.get_wildcard_string">
<span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">get_wildcard_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.get_wildcard_string" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="iotbx.file_reader.get_wildcard_strings">
<span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">get_wildcard_strings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_any</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.get_wildcard_strings" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="iotbx.file_reader.group_files">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">group_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pdb'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_by_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.group_files" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="iotbx.file_reader.guess_file_type">
<span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">guess_file_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'a3m':</span> <span class="pre">['a3m'],</span> <span class="pre">'aln':</span> <span class="pre">['aln',</span> <span class="pre">'ali',</span> <span class="pre">'clustal'],</span> <span class="pre">'ccp4_map':</span> <span class="pre">['ccp4',</span> <span class="pre">'map',</span> <span class="pre">'mrc'],</span> <span class="pre">'cif':</span> <span class="pre">['cif',</span> <span class="pre">'mmcif'],</span> <span class="pre">'hhr':</span> <span class="pre">['hhr'],</span> <span class="pre">'hkl':</span> <span class="pre">['mtz',</span> <span class="pre">'hkl',</span> <span class="pre">'sca',</span> <span class="pre">'cns',</span> <span class="pre">'xplor',</span> <span class="pre">'cv',</span> <span class="pre">'ref',</span> <span class="pre">'fobs'],</span> <span class="pre">'img':</span> <span class="pre">['img',</span> <span class="pre">'osc',</span> <span class="pre">'mccd',</span> <span class="pre">'cbf',</span> <span class="pre">'nxs',</span> <span class="pre">'h5',</span> <span class="pre">'hdf5'],</span> <span class="pre">'map':</span> <span class="pre">['xplor',</span> <span class="pre">'map',</span> <span class="pre">'ccp4'],</span> <span class="pre">'mtz':</span> <span class="pre">['mtz'],</span> <span class="pre">'ncs':</span> <span class="pre">['ncs',</span> <span class="pre">'ncs_spec'],</span> <span class="pre">'pdb':</span> <span class="pre">['pdb',</span> <span class="pre">'ent'],</span> <span class="pre">'phil':</span> <span class="pre">['params',</span> <span class="pre">'eff',</span> <span class="pre">'def',</span> <span class="pre">'phil',</span> <span class="pre">'param'],</span> <span class="pre">'pkl':</span> <span class="pre">['pickle',</span> <span class="pre">'pkl'],</span> <span class="pre">'rosetta':</span> <span class="pre">['gz'],</span> <span class="pre">'sdf':</span> <span class="pre">['sdf'],</span> <span class="pre">'seq':</span> <span class="pre">['fa',</span> <span class="pre">'faa',</span> <span class="pre">'seq',</span> <span class="pre">'pir',</span> <span class="pre">'dat',</span> <span class="pre">'fasta'],</span> <span class="pre">'smi':</span> <span class="pre">['smi'],</span> <span class="pre">'txt':</span> <span class="pre">['txt',</span> <span class="pre">'log',</span> <span class="pre">'html',</span> <span class="pre">'geo'],</span> <span class="pre">'xml':</span> <span class="pre">['xml'],</span> <span class="pre">'xplor_map':</span> <span class="pre">['xplor',</span> <span class="pre">'map']}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.guess_file_type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="iotbx.file_reader.sort_by_file_type">
<span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">sort_by_file_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.sort_by_file_type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="iotbx.file_reader.splitext">
<span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">splitext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.splitext" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_name</strong> – A plain text string of the file path</p>
</dd>
</dl>
<p>Returns: A tuple of the base filename, the file format extension, and possibly a compression extension</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="iotbx.file_reader.strip_shelx_format_extension">
<span class="sig-prename descclassname"><span class="pre">iotbx.file_reader.</span></span><span class="sig-name descname"><span class="pre">strip_shelx_format_extension</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#iotbx.file_reader.strip_shelx_format_extension" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">iotbx.file_reader - generic file input</a><ul>
<li><a class="reference internal" href="#module-iotbx.file_reader">API documentation</a><ul>
<li><a class="reference internal" href="#iotbx.file_reader.FormatError"><code class="docutils literal notranslate"><span class="pre">FormatError</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file"><code class="docutils literal notranslate"><span class="pre">any_file()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_fast"><code class="docutils literal notranslate"><span class="pre">any_file_fast()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_fast_input"><code class="docutils literal notranslate"><span class="pre">any_file_fast_input</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input"><code class="docutils literal notranslate"><span class="pre">any_file_input</span></code></a><ul>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.assert_file_type"><code class="docutils literal notranslate"><span class="pre">any_file_input.assert_file_type()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.check_file_type"><code class="docutils literal notranslate"><span class="pre">any_file_input.check_file_type()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.crystal_symmetry"><code class="docutils literal notranslate"><span class="pre">any_file_input.crystal_symmetry()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.file_content"><code class="docutils literal notranslate"><span class="pre">any_file_input.file_content</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.file_info"><code class="docutils literal notranslate"><span class="pre">any_file_input.file_info()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.file_name"><code class="docutils literal notranslate"><span class="pre">any_file_input.file_name</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.file_object"><code class="docutils literal notranslate"><span class="pre">any_file_input.file_object</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.file_server"><code class="docutils literal notranslate"><span class="pre">any_file_input.file_server</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.file_type"><code class="docutils literal notranslate"><span class="pre">any_file_input.file_type</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.set_file_type"><code class="docutils literal notranslate"><span class="pre">any_file_input.set_file_type()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.show_summary"><code class="docutils literal notranslate"><span class="pre">any_file_input.show_summary()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.any_file_input.try_all_types"><code class="docutils literal notranslate"><span class="pre">any_file_input.try_all_types()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#iotbx.file_reader.directory_input"><code class="docutils literal notranslate"><span class="pre">directory_input</span></code></a><ul>
<li><a class="reference internal" href="#iotbx.file_reader.directory_input.file_info"><code class="docutils literal notranslate"><span class="pre">directory_input.file_info()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#iotbx.file_reader.find_closest_base_name"><code class="docutils literal notranslate"><span class="pre">find_closest_base_name()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.get_wildcard_string"><code class="docutils literal notranslate"><span class="pre">get_wildcard_string()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.get_wildcard_strings"><code class="docutils literal notranslate"><span class="pre">get_wildcard_strings()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.group_files"><code class="docutils literal notranslate"><span class="pre">group_files</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.guess_file_type"><code class="docutils literal notranslate"><span class="pre">guess_file_type()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.sort_by_file_type"><code class="docutils literal notranslate"><span class="pre">sort_by_file_type()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.splitext"><code class="docutils literal notranslate"><span class="pre">splitext()</span></code></a></li>
<li><a class="reference internal" href="#iotbx.file_reader.strip_shelx_format_extension"><code class="docutils literal notranslate"><span class="pre">strip_shelx_format_extension()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="iotbx.managers.html"
                          title="previous chapter">iotbx.managers</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="iotbx.cif.html"
                          title="next chapter">iotbx.cif</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/iotbx/iotbx.file_reader.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="iotbx.cif.html" title="iotbx.cif"
             >next</a> |</li>
        <li class="right" >
          <a href="iotbx.managers.html" title="iotbx.managers"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CCTBX Developer documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >iotbx - file readers and writers</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">iotbx.file_reader - generic file input</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2014, University of California.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>