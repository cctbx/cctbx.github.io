
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xfel.cxi.cspad_ana package &#8212; CCTBX Developer documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CCTBX Developer documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">xfel.cxi.cspad_ana package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="xfel-cxi-cspad-ana-package">
<h1>xfel.cxi.cspad_ana package<a class="headerlink" href="#xfel-cxi-cspad-ana-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-xfel.cxi.cspad_ana.average_tbx">
<span id="xfel-cxi-cspad-ana-average-tbx-module"></span><h2>xfel.cxi.cspad_ana.average_tbx module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.average_tbx" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.average_tbx.average_mixin">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.average_tbx.</code><code class="sig-name descname">average_mixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">avg_dirname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">avg_basename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stddev_dirname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stddev_basename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_dirname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_basename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">background_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">flags</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">hot_threshold</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">gain_threshold</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">noise_threshold</span><span class="o">=</span><span class="default_value">7</span></em>, <em class="sig-param"><span class="n">elastic_threshold</span><span class="o">=</span><span class="default_value">9</span></em>, <em class="sig-param"><span class="n">symnoise_threshold</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.average_tbx.average_mixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction" title="xfel.cxi.cspad_ana.common_mode.common_mode_correction"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.common_mode.common_mode_correction</span></code></a></p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.average_tbx.average_mixin.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.average_tbx.average_mixin.beginjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The beginjob() function does one-time initialisation from
event- or environment data.  It is called at an XTC configure
transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.average_tbx.average_mixin.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.average_tbx.average_mixin.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The endjob() function finalises the mean and standard deviation
images.  The distance and wavelength in all images is actually the
mean distance and wavelength, since standard deviations or maximum
values of those quantities do not make much sense in
visualisation.</p>
<p>&#64;param evt Event object (psana only)
&#64;param env Environment object
&#64;return    A dictionary object with accumulated statistics or &#64;c</p>
<blockquote>
<div><p>none if the contribution from the worker process is
accounted for elsewhere</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.average_tbx.average_mixin.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.average_tbx.average_mixin.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.common_mode">
<span id="xfel-cxi-cspad-ana-common-mode-module"></span><h2>xfel.cxi.cspad_ana.common_mode module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.common_mode" title="Permalink to this headline">¶</a></h2>
<p>Base class for dark subtraction and common-mode correction</p>
<p>XXX Better named cspad_base?</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.common_mode.common_mode_correction">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.common_mode.</code><code class="sig-name descname">common_mode_correction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">calib_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">common_mode_correction</span><span class="o">=</span><span class="default_value">'none'</span></em>, <em class="sig-param"><span class="n">photon_threshold</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">two_photon_threshold</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dark_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dark_stddev</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mask_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">gain_map_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">gain_map_level</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cache_image</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">roi</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">laser_1_status</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">laser_4_status</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">laser_wait_time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">override_beam_x</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">override_beam_y</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bin_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">crop_rayonix</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xfel.cxi.cspad_ana.mod_event_info.mod_event_info" title="xfel.cxi.cspad_ana.mod_event_info.mod_event_info"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.mod_event_info.mod_event_info</span></code></a></p>
<p>Dark subtraction and alternate implementation of common mode
substituting for cspad_tbx.</p>
<p>Known problems: the algorithm relies on a substantial part of the
sensor having no signal, which is not the case if a water ring
crosses the sensor.</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.common_mode.common_mode_correction.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction.beginjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The beginjob() function does one-time initialisation from
event- or environment data.  It is called at an XTC configure
transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.common_mode.common_mode_correction.chebyshev_common_mode">
<code class="sig-name descname">chebyshev_common_mode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">imgs</span></em>, <em class="sig-param"><span class="n">masks</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction.chebyshev_common_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.common_mode.common_mode_correction.chebyshev_fit">
<code class="sig-name descname">chebyshev_fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x_obs</span></em>, <em class="sig-param"><span class="n">y_obs</span></em>, <em class="sig-param"><span class="n">w_obs</span></em>, <em class="sig-param"><span class="n">n_terms</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction.chebyshev_fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.common_mode.common_mode_correction.common_mode">
<code class="sig-name descname">common_mode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">img</span></em>, <em class="sig-param"><span class="n">stddev</span></em>, <em class="sig-param"><span class="n">mask</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction.common_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>The common_mode() function returns the mode of image stored in
the array pointed to by &#64;p img.  &#64;p mask must be such that the &#64;p
stddev at the selected pixels is greater than zero.</p>
<p>&#64;param img    2D integer array of the image
&#64;param stddev 2D integer array of the standard deviation of each</p>
<blockquote>
<div><p>pixel in &#64;p img</p>
</div></blockquote>
<dl class="simple">
<dt>&#64;param mask   2D Boolean array, &#64;c True if the pixel is to be</dt><dd><p>included, &#64;c False otherwise</p>
</dd>
</dl>
<p>&#64;return       Mode of the image, as a real number</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.common_mode.common_mode_correction.do_photon_counting">
<code class="sig-name descname">do_photon_counting</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction.do_photon_counting" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.common_mode.common_mode_correction.do_sigma_scaling">
<code class="sig-name descname">do_sigma_scaling</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction.do_sigma_scaling" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.common_mode.common_mode_correction.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction.endjob" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.common_mode.common_mode_correction.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.cspad_tbx">
<span id="xfel-cxi-cspad-ana-cspad-tbx-module"></span><h2>xfel.cxi.cspad_ana.cspad_tbx module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.cspad_tbx" title="Permalink to this headline">¶</a></h2>
<p>Toolbox for images from the Cornell SLAC Pixel Array Detector
(CSpad).</p>
<p>XXX Better named cspad_common?</p>
<p>XXX Read out detector temperature (see Hart et al., 2012)?</p>
<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.CsPad2x2Image">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">CsPad2x2Image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">sections</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.CsPad2x2Image" title="Permalink to this definition">¶</a></dt>
<dd><p>The CsPad2x2Image() function assembles a two-dimensional image
from the Sc1 detector readout in &#64;p data.</p>
<p>&#64;param data     Detector readout from XTC stream
&#64;param config   XXX
&#64;param sections XXX Directory with calibration information
&#64;return         Assembled detector image</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.CsPadDetector">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">CsPadDetector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">sections</span></em>, <em class="sig-param"><span class="n">right</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">quads</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.CsPadDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>The CsPadDetector() function assembles a two-dimensional image
from the Ds1 detector readout in &#64;p data3d and the calibration
information in &#64;p sections.  XXX General question: do
variable/function names make sense?</p>
<p>&#64;param address  Full data source address of the DAQ device
&#64;param evt      Event data object, a configure object
&#64;param env      Environment object
&#64;param sections XXX Directory with calibration information
&#64;param right    &#64;c True to restrict rotations to right angles
&#64;return         Assembled detector image</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.CsPadElement">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">CsPadElement</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data3d</span></em>, <em class="sig-param"><span class="n">qn</span></em>, <em class="sig-param"><span class="n">config</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.CsPadElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct one image for each quadrant, each with 8 sections from
a data3d = 3 x 2*194 x 185 data array.  This function was originally
written by Ingrid Ofte for pyana’s XtcExplorer module.  XXX
Documentation!</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.address_split">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">address_split</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">env</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.address_split" title="Permalink to this definition">¶</a></dt>
<dd><p>The address_split() function splits an address into its four
components.  Address strings are on the form
detector-detectorID|device-deviceID, where the detectors must be in
dir(xtc.DetInfo.Detector) and device must be in
(xtc.DetInfo.Device).
&#64;param address Full data source address of the DAQ device
&#64;param env     Optional env to dereference an alias into an address
&#64;return        Four-tuple of detector name, detector ID, device, and</p>
<blockquote>
<div><p>device ID</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.cbcaa">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">cbcaa</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">sections</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.cbcaa" title="Permalink to this definition">¶</a></dt>
<dd><p>The cbcaa() function uses on-disk calibration data to estimate
the beam centre and the active detector areas.  The beam centre is
approximated as the average of the four ASIC corners closest to the
detector centre.  That is the first corner of the section 1 in every
quadrant.  Note that first corner index is vertical coordinate,
second index is the horizontal coordinate.  XXX Construct the active
areas in “spotfinder format”, i.e. opposing corners.  XXX This is a
really bad function name!  XXX The beam centre may be extracted from
the ebeam object?</p>
<p>&#64;param config   XXX
&#64;param sections XXX Directory with calibration information
&#64;return         Tuple of 2D beam centre, and active areas in</p>
<blockquote>
<div><p>“spotfinder format”</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.dpack">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">dpack</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">active_areas</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">address</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">beam_center_x</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">beam_center_y</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ccd_image_saturation</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">distance</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">pixel_size</span><span class="o">=</span><span class="default_value">0.11</span></em>, <em class="sig-param"><span class="n">saturated_value</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timestamp</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wavelength</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xtal_target</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_trusted_value</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.dpack" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX Check completeness.  Should fill in sensible defaults.</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.dwritef">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">dwritef</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">dirname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">basename</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.dwritef" title="Permalink to this definition">¶</a></dt>
<dd><p>The dwritef() function pickles the dictionary pointed to by &#64;p d
to the file whose directory and filename portions are pointed to by
&#64;p dirname and &#64;p basename, respectively.  The directory at &#64;p
dirname, as well as any intermediate directories, are recursively
created if they do not already exist.  The name of the written file
is the concatenation of the &#64;p basename parameter and a sequence
number derived from the timestamp in the dictionary, &#64;p d.</p>
<p>&#64;param d        Dictionary, as created by e.g. dpack()
&#64;param dirname  Directory portion of output file
&#64;param basename Filename prefix of output file
&#64;return         Path of output file</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.dwritef2">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">dwritef2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.dwritef2" title="Permalink to this definition">¶</a></dt>
<dd><p>The dwritef2() function writes the object &#64;p obj to the Python
pickle file whose path is pointed to by &#64;p path.  Non-existent
directories of &#64;p path are created as necessary.</p>
<p>&#64;param obj  Object to write, as created by e.g. dpack()
&#64;param path Path of output file
&#64;return     Path of output file</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.env_detz">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">env_detz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.env_detz" title="Permalink to this definition">¶</a></dt>
<dd><p>The env_detz() function returns the position of the detector with
the given address string on the z-axis in mm.  The zero-point is as
far away as possible from the sample, and values decrease as the
detector is moved towards the sample.
&#64;param address Full data source address of the DAQ device
&#64;param env     Environment object
&#64;return        Detector z-position, in mm</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.env_distance">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">env_distance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">offset</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.env_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>The env_distance() function returns the distance between the
sample and the detector with the given address string in mm.  The
distance between the sample and the the detector’s zero-point can
vary by an inch or more between different LCLS runs.  According to
Sébastien Boutet the offset should be stable to within ±0.5 mm
during a normal experiment.</p>
<p>&#64;param address Full data source address of the DAQ device
&#64;param env     Environment object
&#64;param offset  Detector-sample offset in mm, corresponding to</p>
<blockquote>
<div><p>longest detector-sample distance</p>
</div></blockquote>
<p>&#64;return        Detector-sample distance, in mm</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.env_injector_xyz">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">env_injector_xyz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.env_injector_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the coordinates of the sample injector.  XXX units unknown?</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.env_laser_status">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">env_laser_status</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">laser_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.env_laser_status" title="Permalink to this definition">¶</a></dt>
<dd><p>The return value is a bool that indicates whether the laser in
question was on for that particular shot.  Bear in mind that sample
hit by the laser will only encounter the X-rays some time after,
depending on the flow rate.</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.env_sifoil">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">env_sifoil</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.env_sifoil" title="Permalink to this definition">¶</a></dt>
<dd><p>The env_sifoil() function returns the total thickness of Si-foil,
in um, that attenuates the beam.  According to an e-mail from Garth
Williams, the centres of the attenuators are in the beam at around 0
mm, and leave the beam at something like -7 mm.  The “out” position
is at approximately -15 mm.</p>
<p>&#64;param env Environment object
&#64;return    Total thickness of attenuating Si-foil</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.env_wavelength_sxr">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">env_wavelength_sxr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.env_wavelength_sxr" title="Permalink to this definition">¶</a></dt>
<dd><p>The env_wavelength_sxr() function returns the wavelength in
Ångström of the environment pointed to by &#64;p env at the time of the
event &#64;p evt.  The function returns a positive value or &#64;c None if
no wavelength is available for the event.  See Heimann et al. (2011)
Rev. Sci. Instrum. 82, 093104.</p>
<dl class="simple">
<dt>&#64;note The wavelength in eV is 12398.4187 divided by the value</dt><dd><p>returned from env_wavelength_sxr().</p>
</dd>
</dl>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object
&#64;return    Wavelength, in Ångström</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.evt_beam_charge">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">evt_beam_charge</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.evt_beam_charge" title="Permalink to this definition">¶</a></dt>
<dd><p>The evt_beam_charge() function returns the charge of the pulse in
nC.</p>
<p>&#64;param evt Event data object, a configure object
&#64;return    Pulse charge, in nC</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.evt_get_quads">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">evt_get_quads</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.evt_get_quads" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.evt_pulse_energy">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">evt_pulse_energy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.evt_pulse_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>The evt_pulse_energy() function returns the energy, or the
intensity, of the pulse in arbitrary units.  The returned value
should be proportional to the number of photons in the pulse, and
may be negative due to noise.</p>
<dl class="simple">
<dt>&#64;note An absolute, but less accurate, estimate of the number of</dt><dd><p>photons in the pulse may be obtained from the gas monitor
detector’s fMilliJoulesPerPulse value.</p>
</dd>
</dl>
<p>&#64;param evt Event data object, a configure object
&#64;return    Pulse intensity, in arbitrary units</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.evt_pulse_length">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">evt_pulse_length</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.evt_pulse_length" title="Permalink to this definition">¶</a></dt>
<dd><p>The evt_pulse_length() function returns the pulse length in fs.
It is calculated as the ratio of the charge (in nC) and the peak
current (in A).</p>
<p>&#64;param evt Event data object, a configure object
&#64;return    Pulse length, in fs</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.evt_repetition_rate">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">evt_repetition_rate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">address</span><span class="o">=</span><span class="default_value">'*'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.evt_repetition_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>The evt_repetition_rate() function returns the repetition rate of
the instrument in Hz.  See
<a class="reference external" href="https://confluence.slac.stanford.edu/display/PCDS/EVR+Event+Codes">https://confluence.slac.stanford.edu/display/PCDS/EVR+Event+Codes</a></p>
<p>&#64;param evt     Event data object, a configure object
&#64;param address Data source address of the DAQ device
&#64;return        Integer repetition rate, in Hz</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.evt_seqno">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">evt_seqno</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.evt_seqno" title="Permalink to this definition">¶</a></dt>
<dd><p>The evt_seqno() function returns string representation of a
sequence number.  If &#64;p evt is not &#64;c None the return value reflects
the time at which &#64;p evt occurred, otherwise the current time is
used.  If &#64;p evt does not contain a time, evt_seqno() returns &#64;c
None.  XXX Should probably return an integer type instead?</p>
<p>&#64;param evt Event data object, a configure object
&#64;return    String representation of sequence number</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.evt_time">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">evt_time</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.evt_time" title="Permalink to this definition">¶</a></dt>
<dd><p>The evt_time() function returns the time of the event &#64;p evt since
midnight, 1 January 1970 UTC (Unix time) to millisecond precision.
If &#64;p evt does not contain a time, evt_time() returns &#64;c None.  If
&#64;p evt is &#64;c None the return value reflects current time is used.</p>
<dl class="simple">
<dt>&#64;note Millisecond precision is sufficient, because at 120 Hz, shots</dt><dd><p>are taken at 8.3 ms intervals.</p>
</dd>
</dl>
<p>&#64;param evt Event data object, a configure object
&#64;return    Unix time as a tuple of seconds and milliseconds</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.evt_timestamp">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">evt_timestamp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.evt_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>The evt_timestamp() function returns a string representation of
an extended human-readable ISO 8601 timestamp.  If &#64;p t is &#64;c None
the current time is used.  The function returns &#64;c None on failure.</p>
<p>&#64;param t Tuple of the time in seconds and milliseconds
&#64;return  Human-readable ISO 8601 timestamp in string representation</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.evt_wavelength">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">evt_wavelength</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">delta_k</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.evt_wavelength" title="Permalink to this definition">¶</a></dt>
<dd><p>The evt_wavelength() function returns the wavelength in Ångström
of the event pointed to by &#64;p evt.  From Margaritondo &amp; Rebernik
Ribic (2011): the dimensionless relativistic γ-factor is derived
from beam energy in MeV and the electron rest mass, K is a
dimensionless “undulator parameter”, and L is the macroscopic
undulator period in Ångström.  See also
<a class="reference external" href="https://people.eecs.berkeley.edu/~attwood/srms/2007/Lec10.pdf">https://people.eecs.berkeley.edu/~attwood/srms/2007/Lec10.pdf</a></p>
<p>&#64;param evt     Event data object, a configure object
&#64;param delta_k Optional K-value correction
&#64;return        Wavelength, in Ångström</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.getOptBool">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">getOptBool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.getOptBool" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.getOptEvalOrString">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">getOptEvalOrString</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.getOptEvalOrString" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow python code macros in the pyana configuration file, e.g.
dark_path   = “/location_of_darks/r%%04d/Ds1-avg.pickle”%%(max([{True:dark,False:0}[3 &gt; dark] for dark in [1,2,6,9,12,14,17,19]]))</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.getOptFloat">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">getOptFloat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.getOptFloat" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a single float.</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.getOptInteger">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">getOptInteger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.getOptInteger" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX Return a single integer.  This function was originally
written by Ingrid Ofte for pyana’s XtcExplorer module.  XXX What if
conversion fails?</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.getOptROI">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">getOptROI</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.getOptROI" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple of the region of interest.
Format: roi = fast_low:fast_high,slow_low:slow_high</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.getOptString">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">getOptString</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.getOptString" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX Return the string, strip of any white space (make sure there
are no newline characters here).  This function was originally
written by Ingrid Ofte for pyana’s XtcExplorer module.</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.getOptStrings">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">getOptStrings</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.getOptStrings" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX Return a list of strings.  This function was originally
written by Ingrid Ofte for pyana’s XtcExplorer module.</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.get_ebeam">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">get_ebeam</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.get_ebeam" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.hdf5pack">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">hdf5pack</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hdf5_file</span></em>, <em class="sig-param"><span class="n">active_areas</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">address</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">attenuation</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">beam_center_x</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">beam_center_y</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ccd_image_saturation</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">distance</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">pixel_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">pulse_length</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">saturated_value</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timestamp</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wavelength</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xtal_target</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.hdf5pack" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar but far from identical to the HDF5 output from CASS.  XXX
Poor diagnostics–we don’t know if it failed or not.</p>
<dl class="simple">
<dt>&#64;note Does not include the deprecated SEQUENCE_NUMBER attribute.</dt><dd><p>While some redundant items are written in order to keep the
HDF5 synchronised to the pickle format, neither SIZE1 nor
SIZE2 are included.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.image">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">sections</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.image" title="Permalink to this definition">¶</a></dt>
<dd><p>Assemble the uint16 detector image, and sum it up as int32.  Sum
the image of squared intensities as uint64.  XXX Documentation! XXX
Would be nice to get rid of the constant string names.  XXX Better
named evt_image()?</p>
<p>&#64;param address  Full data source address of the DAQ device
&#64;param config   XXX This should go–get up-to-date object on the fly!
&#64;param evt      Event data object, a configure object
&#64;param env      Environment object
&#64;param sections XXX
&#64;return         XXX</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.image_xpp">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">image_xpp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="n">aa</span></em>, <em class="sig-param"><span class="n">quads</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.image_xpp" title="Permalink to this definition">¶</a></dt>
<dd><p>Assemble the uint16 detector image, see also
cspad_tbx.CsPadDetector().  XXX Documentation! XXX Would be nice to
get rid of the constant string names.  XXX Better named evt_image()?</p>
<p>&#64;param address Full data source address of the DAQ device
&#64;param evt     Event data object, a configure object
&#64;param env     Environment object
&#64;param aa      Active areas, in lieu of full metrology object
&#64;param quads   Data, if None get it from the event
&#64;return        XXX</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.iplace">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">iplace</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dst</span></em>, <em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">angle</span></em>, <em class="sig-param"><span class="n">center</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.iplace" title="Permalink to this definition">¶</a></dt>
<dd><p>The iplace() function places &#64;p src in &#64;p dst centred on &#64;p
center after rotating it by &#64;p angle degrees counter-clockwise.
The source image is mapped onto the destination image by bilinear
interpolation.  While this may introduce interpolation artifacts
it is significantly simpler than many other interpolation
methods–and bog slow.</p>
<p>&#64;p dst    Destination image
&#64;p src    Source image
&#64;p angle  Rotation angle, in degrees
&#64;p center Centre of &#64;p src in &#64;p dst, after rotation</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.old_address_to_new_address">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">old_address_to_new_address</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.old_address_to_new_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Change between old and new style detector addresses.
I.E. CxiDs1-0|Cspad-0 becomes CxiDs1.0:Cspad.0
&#64;param address detector address to convert</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.pathsubst">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">pathsubst</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_string</span></em>, <em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.pathsubst" title="Permalink to this definition">¶</a></dt>
<dd><p>The pathsubst() function provides variable substitution and value
formatting as described in PEP 3101.  The function returns a copy of
the input string, &#64;p format_string, with field names replaced by
their appropriate values as determined by either &#64;p evt, &#64;p env, or
the user-supplied keyworded arguments, &#64;p kwargs.</p>
<p>chunk:      Chunk number or -1 if unknown.</p>
<dl class="simple">
<dt>epoch:      Time of the event, in number of seconds since midnight,</dt><dd><p>1 January 1970 UTC (Unix time), to millisecond
precision.</p>
</dd>
</dl>
<p>experiment: Experiment name, or empty string if unknown.</p>
<p>expNum:     Experiment number or -1 if unknown.</p>
<p>instrument: Instrument name, or empty string if unknown.</p>
<dl class="simple">
<dt>iso8601:    The time of the event as an extended human-readable ISO</dt><dd><p>8601 timestamp, to millisecond precision, or the empty
string if unknown.  Not suitable for file names, because
it contains characters that do not play well with
certain file systems (e.g. NTFS).</p>
</dd>
</dl>
<p>jobName:    Job name.</p>
<dl class="simple">
<dt>jobNameSub: Combination of job name and subprocess index as a string</dt><dd><p>which is unique for all subprocesses in a job.</p>
</dd>
</dl>
<p>run:        Run number or -1 if unknown.</p>
<p>seqno:      Sequence number or -1 if unknown.</p>
<p>stream:     Stream number or -1 if unknown.</p>
<dl class="simple">
<dt>subprocess: Subprocess number.  This is a non-negative integer in</dt><dd><p>the range [0, nproc) when multiprocessing, or -1 for a
single-process job.</p>
</dd>
</dl>
<p>user:       The “login name” of the user.</p>
<p>In addition to the standard conversion flags, the pathsubst()
function implements the &lt;code&gt;!u&lt;/code&gt; and &lt;code&gt;!l&lt;/code&gt; flags
for conversion to upper- and lower-case strings, respectively.</p>
<p>Literal braces can be escaped by doubling, i.e. &lt;code&gt;{&lt;/code&gt; is
written &lt;code&gt;{{&lt;/code&gt;, and &lt;code&gt;}&lt;/code&gt; as &lt;code&gt;}}&lt;/code&gt;.</p>
<dl class="simple">
<dt>&#64;note Chunk number, expNum, run number, and stream number are</dt><dd><p>determined from the input XTC file name.  If a file does not
adhere to the standard format, it may not be possible to
determine these quantities.</p>
</dd>
<dt>&#64;note String substitution requires PSDM pyana version 0.10.3 or</dt><dd><p>greater.</p>
</dd>
</dl>
<p>&#64;param format_string String containing replacement fields
&#64;param evt           Event data object, a configure object
&#64;param env           Environment object
&#64;param kwargs        User-supplied replacements, on the form</p>
<blockquote>
<div><p>&lt;code&gt;field_name=value&lt;/code&gt;</p>
</div></blockquote>
<dl class="simple">
<dt>&#64;return               Copy of &#64;p format_string, with replacement</dt><dd><p>fields substituted by their appropriate values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.rplace">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">rplace</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dst</span></em>, <em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">angle</span></em>, <em class="sig-param"><span class="n">center</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.rplace" title="Permalink to this definition">¶</a></dt>
<dd><p>The rplace() function places &#64;p src in &#64;p dst centred on &#64;p
centre after rotating it by &#64;p angle degrees counter-clockwise.
The rotation angle is rounded to the nearest integer multiple of
90 degrees before transformation.</p>
<p>&#64;p dst    Destination image
&#64;p src    Source image
&#64;p angle  Rotation angle, in degrees
&#64;p center Centre of &#64;p src in &#64;p dst, after rotation</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.cspad_tbx.write_tiff">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.cspad_tbx.</code><code class="sig-name descname">write_tiff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">dirname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">basename</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.cspad_tbx.write_tiff" title="Permalink to this definition">¶</a></dt>
<dd><p>The write an image tiff.  Basic implementation no frills, no metadata</p>
</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.display_calib">
<span id="xfel-cxi-cspad-ana-display-calib-module"></span><h2>xfel.cxi.cspad_ana.display_calib module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.display_calib" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="xfel.cxi.cspad_ana.display_calib.display_calib">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.display_calib.</code><code class="sig-name descname">display_calib</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dirname</span></em>, <em class="sig-param"><span class="n">right</span></em>, <em class="sig-param"><span class="n">verbose</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.display_calib.display_calib" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX Docstring, in fact revise all the documentation</p>
<p>&#64;param dirname Directory with calibration information
&#64;param right   &#64;c True to restrict rotations to right angles
&#64;param verbose &#64;c True to print ASIC coordinates</p>
</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.histogram_finalise">
<span id="xfel-cxi-cspad-ana-histogram-finalise-module"></span><h2>xfel.cxi.cspad_ana.histogram_finalise module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.histogram_finalise" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.histogram_finalise.finalise_one_run">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.histogram_finalise.</code><code class="sig-name descname">finalise_one_run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scratch_dir</span></em>, <em class="sig-param"><span class="n">pickle_pattern</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.histogram_finalise.finalise_one_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="xfel.cxi.cspad_ana.histogram_finalise.histogram_finalise">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.histogram_finalise.</code><code class="sig-name descname">histogram_finalise</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">output_dirname</span></em>, <em class="sig-param"><span class="n">runs</span></em>, <em class="sig-param"><span class="n">pickle_pattern</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.histogram_finalise.histogram_finalise" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.histogram_finalise.update_histograms">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.histogram_finalise.</code><code class="sig-name descname">update_histograms</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hist_dict1</span></em>, <em class="sig-param"><span class="n">hist_dict2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.histogram_finalise.update_histograms" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.hitfinder_tbx">
<span id="xfel-cxi-cspad-ana-hitfinder-tbx-module"></span><h2>xfel.cxi.cspad_ana.hitfinder_tbx module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.hitfinder_tbx" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.hitfinder_tbx.</code><code class="sig-name descname">distl_hitfinder</code><a class="headerlink" href="#xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder.distl_filter">
<code class="sig-name descname">distl_filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">cspad_img</span></em>, <em class="sig-param"><span class="n">distance</span></em>, <em class="sig-param"><span class="n">timestamp</span></em>, <em class="sig-param"><span class="n">wavelength</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder.distl_filter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder.get_active_data">
<code class="sig-name descname">get_active_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">imgobj</span></em>, <em class="sig-param"><span class="n">phil</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder.get_active_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder.set_up_hitfinder">
<code class="sig-name descname">set_up_hitfinder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder.set_up_hitfinder" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_average">
<span id="xfel-cxi-cspad-ana-mod-average-module"></span><h2>xfel.cxi.cspad_ana.mod_average module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_average" title="Permalink to this headline">¶</a></h2>
<p>First- and second-order statistics for CS-PAD images</p>
<p>The mod_average user analysis module computes the (arithmetic) mean and the
standard deviation from the images in an XTC stream.  On successful
completion, the mean and standard deviation images are written to disk
as pickled dictionaries.</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_average.mod_average">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_average.</code><code class="sig-name descname">mod_average</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">max_out</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mean_out</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">std_out</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_average.mod_average" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xfel.cxi.cspad_ana.average_tbx.average_mixin" title="xfel.cxi.cspad_ana.average_tbx.average_mixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.average_tbx.average_mixin</span></code></a></p>
<p>Class for generating first- and second-order statistics within
the pyana framework</p>
<p>XXX Maybe this module should be renamed to mod_stat12, mod_sstat or
some such?</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_average.mod_average.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_average.mod_average.beginjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The beginjob() function does one-time initialisation from
event- or environment data.  It is called at an XTC configure
transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_average.mod_average.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_average.mod_average.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The endjob() function writes the mean and standard deviation images
to disk.</p>
<p>&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_average.mod_average.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_average.mod_average.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="xfel-cxi-cspad-ana-mod-average-cbf-module">
<h2>xfel.cxi.cspad_ana.mod_average_cbf module<a class="headerlink" href="#xfel-cxi-cspad-ana-mod-average-cbf-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="xfel-cxi-cspad-ana-mod-cbf-hitfind-module">
<h2>xfel.cxi.cspad_ana.mod_cbf_hitfind module<a class="headerlink" href="#xfel-cxi-cspad-ana-mod-cbf-hitfind-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="xfel-cxi-cspad-ana-mod-cbf-index-module">
<h2>xfel.cxi.cspad_ana.mod_cbf_index module<a class="headerlink" href="#xfel-cxi-cspad-ana-mod-cbf-index-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="xfel-cxi-cspad-ana-mod-cspad-cbf-module">
<h2>xfel.cxi.cspad_ana.mod_cspad_cbf module<a class="headerlink" href="#xfel-cxi-cspad-ana-mod-cspad-cbf-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="xfel-cxi-cspad-ana-mod-cspad-cbf-dump-module">
<h2>xfel.cxi.cspad_ana.mod_cspad_cbf_dump module<a class="headerlink" href="#xfel-cxi-cspad-ana-mod-cspad-cbf-dump-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_daq_status">
<span id="xfel-cxi-cspad-ana-mod-daq-status-module"></span><h2>xfel.cxi.cspad_ana.mod_daq_status module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_daq_status" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_daq_status.StatusFrame_thread">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_daq_status.</code><code class="sig-name descname">StatusFrame_thread</code><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_daq_status.StatusFrame_thread" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Thread" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></a></p>
<p>The XrayFrame_thread class allows Run MainLoop() to be run as a
thread, which is necessary because all calls to wxPython must be
made from the same thread that originally imported wxPython.</p>
<p>This is all based on “Running MainLoop in a separate thread”,
<a class="reference external" href="http://wiki.wxpython.org/MainLoopAsThread">http://wiki.wxpython.org/MainLoopAsThread</a>.</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_daq_status.StatusFrame_thread.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_daq_status.StatusFrame_thread.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_daq_status.StatusFrame_thread.start_local">
<code class="sig-name descname">start_local</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_daq_status.StatusFrame_thread.start_local" title="Permalink to this definition">¶</a></dt>
<dd><p>The start_local() function calls the run() function through
self.start_orig, and exists only after self.lock has been
released.  This eliminates a race condition which could cause
updates to be sent to non-existent frame.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_daq_status.</code><code class="sig-name descname">mod_daq_status</code><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status.beginjob" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status.event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status.initialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status.update_plot">
<code class="sig-name descname">update_plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_daq_status.mod_daq_status.update_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Post an update event with current plot values to redraw the window.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_dump">
<span id="xfel-cxi-cspad-ana-mod-dump-module"></span><h2>xfel.cxi.cspad_ana.mod_dump module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_dump" title="Permalink to this headline">¶</a></h2>
<p>Output image to the file system.</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_dump.mod_dump">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_dump.</code><code class="sig-name descname">mod_dump</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">out_dirname</span></em>, <em class="sig-param"><span class="n">out_basename</span></em>, <em class="sig-param"><span class="n">out_format</span><span class="o">=</span><span class="default_value">'pickle'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_dump.mod_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction" title="xfel.cxi.cspad_ana.common_mode.common_mode_correction"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.common_mode.common_mode_correction</span></code></a></p>
<p>Class for outputting images to the file system within the pyana
analysis framework.  XXX This should eventually deprecate the
‘write_dict’ dispatch from mod_hitfind.</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_dump.mod_dump.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_dump.mod_dump.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.  It
outputs the detector image associated with the event &#64;p evt to the
file system.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_dump_bitmap">
<span id="xfel-cxi-cspad-ana-mod-dump-bitmap-module"></span><h2>xfel.cxi.cspad_ana.mod_dump_bitmap module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_dump_bitmap" title="Permalink to this headline">¶</a></h2>
<p>Output image to the file system.</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_dump_bitmap.mod_dump_bitmap">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_dump_bitmap.</code><code class="sig-name descname">mod_dump_bitmap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">out_dirname</span></em>, <em class="sig-param"><span class="n">out_basename</span></em>, <em class="sig-param"><span class="n">binning</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">brightness</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">color_scheme</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">format</span><span class="o">=</span><span class="default_value">'png'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_dump_bitmap.mod_dump_bitmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction" title="xfel.cxi.cspad_ana.common_mode.common_mode_correction"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.common_mode.common_mode_correction</span></code></a></p>
<p>Class for outputting images to the file system within the pyana
analysis framework.  XXX This should eventually deprecate the
‘write_dict’ dispatch from mod_hitfind.</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_dump_bitmap.mod_dump_bitmap.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_dump_bitmap.mod_dump_bitmap.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.  It
outputs the detector image associated with the event &#64;p evt to the
file system.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_event_info">
<span id="xfel-cxi-cspad-ana-mod-event-info-module"></span><h2>xfel.cxi.cspad_ana.mod_event_info module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_event_info" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_event_info.laser_status">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_event_info.</code><code class="sig-name descname">laser_status</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">laser_id</span></em>, <em class="sig-param"><span class="n">status</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_event_info.laser_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_event_info.laser_status.ms_since_last_status_change">
<code class="sig-name descname">ms_since_last_status_change</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_event_info.laser_status.ms_since_last_status_change" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_event_info.laser_status.set_status">
<code class="sig-name descname">set_status</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em>, <em class="sig-param"><span class="n">evt_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_event_info.laser_status.set_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_event_info.laser_status.status">
<em class="property">property </em><code class="sig-name descname">status</code><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_event_info.laser_status.status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="xfel.cxi.cspad_ana.mod_event_info.laser_status.status_change_timestamp">
<code class="sig-name descname">status_change_timestamp</code><em class="property"> = None</em><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_event_info.laser_status.status_change_timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_event_info.mod_event_info">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_event_info.</code><code class="sig-name descname">mod_event_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">detz_offset</span><span class="o">=</span><span class="default_value">575</span></em>, <em class="sig-param"><span class="n">check_beam_status</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">delta_k</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">override_energy</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_event_info.mod_event_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Extract basic information from the evt and env objects for each event.</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_event_info.mod_event_info.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_event_info.mod_event_info.beginjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The beginjob() function does one-time initialisation from
event- or environment data.  It is called at an XTC configure
transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_event_info.mod_event_info.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_event_info.mod_event_info.endjob" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_event_info.mod_event_info.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_event_info.mod_event_info.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_filter">
<span id="xfel-cxi-cspad-ana-mod-filter-module"></span><h2>xfel.cxi.cspad_ana.mod_filter module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_filter" title="Permalink to this headline">¶</a></h2>
<p>The mod_filter module extracts timestamps from a file and uses them
to filter events.  A single valid timestamp can be embedded anywhere
in a word, where individual words must be separated by any amount of
white space.  Lines where the first non-white space character is a
hash mark are ignored.</p>
<p>By default, only events whose timestamps match are passed through to
downwind modules.  If &#64;c negate is &#64;c True, mismatching events are
selected instead.  Events with missing timestamps are always skipped.</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_filter.mod_filter">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_filter.</code><code class="sig-name descname">mod_filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamps_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timestamps_interval</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">negate</span><span class="o">=</span><span class="default_value">'False'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_filter.mod_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_filter.mod_filter.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_filter.mod_filter.beginjob" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_filter.mod_filter.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_filter.mod_filter.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_filter.mod_filter.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_filter.mod_filter.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function puts a “skip_event” object with value &#64;c
True into the event if the shot is to be skipped.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_hdf5">
<span id="xfel-cxi-cspad-ana-mod-hdf5-module"></span><h2>xfel.cxi.cspad_ana.mod_hdf5 module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_hdf5" title="Permalink to this headline">¶</a></h2>
<p>The mod_hdf5 module writes all events to a single HDF5
(hierarchical data format, version 5) file.  XXX Not sure how this
module will behave under multiprocessing.</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_hdf5.mod_hdf5">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_hdf5.</code><code class="sig-name descname">mod_hdf5</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_hdf5.mod_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction" title="xfel.cxi.cspad_ana.common_mode.common_mode_correction"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.common_mode.common_mode_correction</span></code></a></p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_hdf5.mod_hdf5.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_hdf5.mod_hdf5.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function creates a HDF5 group for the event, unless
it contains a “skip_event” object with value &#64;c True.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_hitfind">
<span id="xfel-cxi-cspad-ana-mod-hitfind-module"></span><h2>xfel.cxi.cspad_ana.mod_hitfind module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_hitfind" title="Permalink to this headline">¶</a></h2>
<p>Hitfinding for CSPad images</p>
<p>XXX</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_hitfind.</code><code class="sig-name descname">mod_hitfind</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">dispatch</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">integration_dirname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">integration_basename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out_dirname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out_basename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">roi</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">distl_min_peaks</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">distl_flags</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">threshold</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xtal_target</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">negate_hits</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">trial_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">db_logging</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">progress_logging</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">sql_buffer_size</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">db_host</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">db_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">db_table_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">db_experiment_tag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">db_user</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">db_password</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">db_tags</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">trial</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rungroup_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">db_version</span><span class="o">=</span><span class="default_value">'v1'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction" title="xfel.cxi.cspad_ana.common_mode.common_mode_correction"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.common_mode.common_mode_correction</span></code></a>, <a class="reference internal" href="#xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder" title="xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.hitfinder_tbx.distl_hitfinder</span></code></a></p>
<p>Class for hitfinding within the pyana framework</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.beginjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The beginjob() function does one-time initialisation from
event- or environment data.  It is called at an XTC configure
transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.commit_entries">
<code class="sig-name descname">commit_entries</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.commit_entries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.commit_progress_entries">
<code class="sig-name descname">commit_progress_entries</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.commit_progress_entries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The endjob() function logs the number of processed shots.</p>
<p>&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.
XXX more?</p>
<p>Previously, common-mode correction was applied only after initial
threshold filtering.  Since the common_mode class applies the
(lengthy) common-mode correction immediately after reading the
image from the stream, this optimisation is currently not
(elegantly) doable.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.queue_entry">
<code class="sig-name descname">queue_entry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">entry</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.queue_entry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.queue_progress_entry">
<code class="sig-name descname">queue_progress_entry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">entry</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_hitfind.mod_hitfind.queue_progress_entry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_illumination_filter">
<span id="xfel-cxi-cspad-ana-mod-illumination-filter-module"></span><h2>xfel.cxi.cspad_ana.mod_illumination_filter module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_illumination_filter" title="Permalink to this headline">¶</a></h2>
<p>The mod_illumination_filter module filter events by their
illumination condition.  When illumination conditions matter, laser 4
should always be off, and laser 1 must have had its state changed for
least laser_wait_time ms before the event.  Events with missing
timestamps are always skipped.</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_illumination_filter.mod_illumination_filter">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_illumination_filter.</code><code class="sig-name descname">mod_illumination_filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">illumination</span></em>, <em class="sig-param"><span class="n">laser_wait_time</span><span class="o">=</span><span class="default_value">'2000'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_illumination_filter.mod_illumination_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_illumination_filter.mod_illumination_filter.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_illumination_filter.mod_illumination_filter.beginjob" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_illumination_filter.mod_illumination_filter.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_illumination_filter.mod_illumination_filter.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_illumination_filter.mod_illumination_filter.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_illumination_filter.mod_illumination_filter.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function puts a “skip_event” object with value &#64;c
True into the event if the shot is to be skipped.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="xfel-cxi-cspad-ana-mod-ledge-module">
<h2>xfel.cxi.cspad_ana.mod_ledge module<a class="headerlink" href="#xfel-cxi-cspad-ana-mod-ledge-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_mar">
<span id="xfel-cxi-cspad-ana-mod-mar-module"></span><h2>xfel.cxi.cspad_ana.mod_mar module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_mar" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_mar.mod_mar">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_mar.</code><code class="sig-name descname">mod_mar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">directory</span></em>, <em class="sig-param"><span class="n">beam_x</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">beam_y</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">template</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_mar.mod_mar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_mar.mod_mar.begincalibcycle">
<code class="sig-name descname">begincalibcycle</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_mar.mod_mar.begincalibcycle" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_mar.mod_mar.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_mar.mod_mar.beginjob" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_mar.mod_mar.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_mar.mod_mar.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_mar.mod_mar.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_mar.mod_mar.event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_param">
<span id="xfel-cxi-cspad-ana-mod-param-module"></span><h2>xfel.cxi.cspad_ana.mod_param module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_param" title="Permalink to this headline">¶</a></h2>
<p>Simple analysis of per-shot parameters of a run</p>
<p>XXX mod_param must be run as a single process–guard against it!</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_param.mod_param">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_param.</code><code class="sig-name descname">mod_param</code><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_param.mod_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class for simple analysis of certain per-shot parameters of a
run.  Currently attenuation, sample-detector distance, and
wavelength are considered.  Since attenuation and distance is not
expected to vary, their values are output only when changed.  For
the wavelength, the average and standard deviation is computed.
Note that incompleteness due to lacking image data is not detected,
because it may slow down this module considerably.</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_param.mod_param.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_param.mod_param.beginjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The beginjob() function does one-time initialisation from
event- or environment data.  It is called at an XTC configure
transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_param.mod_param.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_param.mod_param.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The endjob() function finalises the mean and standard deviation
calculations, and reports on the total number of skipped shots.</p>
<p>&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_param.mod_param.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_param.mod_param.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.
The event() function does not log shots skipped due to
incompleteness in order to keep the output streams clean.
Instead, the number of skipped shots is reported by endjob().</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="xfel-cxi-cspad-ana-mod-pickle2cbf-dump-module">
<h2>xfel.cxi.cspad_ana.mod_pickle2cbf_dump module<a class="headerlink" href="#xfel-cxi-cspad-ana-mod-pickle2cbf-dump-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_pulnix_dump">
<span id="xfel-cxi-cspad-ana-mod-pulnix-dump-module"></span><h2>xfel.cxi.cspad_ana.mod_pulnix_dump module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_pulnix_dump" title="Permalink to this headline">¶</a></h2>
<p>XXX</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_pulnix_dump.mod_pulnix_dump">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_pulnix_dump.</code><code class="sig-name descname">mod_pulnix_dump</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">out_dirname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out_basename</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_pulnix_dump.mod_pulnix_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class for dumping simple intensity images into an uncompressed
tarball.  At 120 Hz it is inconvenient to dump every single image to
its own file.</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_pulnix_dump.mod_pulnix_dump.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_pulnix_dump.mod_pulnix_dump.beginjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The beginjob() function is called at an XTC configure transition.
It opens per-process tar files to avoid clobbering while
multiprocessing.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_pulnix_dump.mod_pulnix_dump.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_pulnix_dump.mod_pulnix_dump.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The endjob() function closes the tar file opened in beginjob().</p>
<p>&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_pulnix_dump.mod_pulnix_dump.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_pulnix_dump.mod_pulnix_dump.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_radial_average">
<span id="xfel-cxi-cspad-ana-mod-radial-average-module"></span><h2>xfel.cxi.cspad_ana.mod_radial_average module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_radial_average" title="Permalink to this headline">¶</a></h2>
<p>Calculate the radial average of the images in a stream, for each image.</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_radial_average.mod_radial_average">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_radial_average.</code><code class="sig-name descname">mod_radial_average</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">out_dirname</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out_basename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xtal_target</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">two_theta_low</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">two_theta_high</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_radial_average.mod_radial_average" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction" title="xfel.cxi.cspad_ana.common_mode.common_mode_correction"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.common_mode.common_mode_correction</span></code></a></p>
<p>Class for calulating radial average of images</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_radial_average.mod_radial_average.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_radial_average.mod_radial_average.beginjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The beginjob() function does one-time initialisation from
event- or environment data.  It is called at an XTC configure
transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_radial_average.mod_radial_average.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_radial_average.mod_radial_average.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The endjob() function logs the number of processed shots.</p>
<p>&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_radial_average.mod_radial_average.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_radial_average.mod_radial_average.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.
&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="xfel-cxi-cspad-ana-mod-spectra-module">
<h2>xfel.cxi.cspad_ana.mod_spectra module<a class="headerlink" href="#xfel-cxi-cspad-ana-mod-spectra-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="xfel-cxi-cspad-ana-mod-spectra-view-module">
<h2>xfel.cxi.cspad_ana.mod_spectra_view module<a class="headerlink" href="#xfel-cxi-cspad-ana-mod-spectra-view-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="xfel-cxi-cspad-ana-mod-view-module">
<h2>xfel.cxi.cspad_ana.mod_view module<a class="headerlink" href="#xfel-cxi-cspad-ana-mod-view-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-xfel.cxi.cspad_ana.mod_xes">
<span id="xfel-cxi-cspad-ana-mod-xes-module"></span><h2>xfel.cxi.cspad_ana.mod_xes module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.mod_xes" title="Permalink to this headline">¶</a></h2>
<p>First- and second-order statistics for CS-PAD images</p>
<p>The mod_xes user analysis module performs the following sequence of
analysis:  dark correction (using average dark previously computed
by mod_average); removal of inactive pixels; common mode correction;
removal of pixels with high stddev (“hot pixels”); removal of
noise &lt; 5 ADUs; selection of scan rows known to contain the
spectrum; summation-reduction so as to form a single spectrum.</p>
<p>XXX mod_xes must be run as a single process–guard against it!</p>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.mod_xes.mod_xes">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.mod_xes.</code><code class="sig-name descname">mod_xes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">pickle_dirname</span><span class="o">=</span><span class="default_value">'.'</span></em>, <em class="sig-param"><span class="n">pickle_basename</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">roi</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_xes.mod_xes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xfel.cxi.cspad_ana.average_tbx.average_mixin" title="xfel.cxi.cspad_ana.average_tbx.average_mixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.average_tbx.average_mixin</span></code></a></p>
<p>Class for generating first- and second-order statistics within
the pyana framework</p>
<p>XXX Maybe this module should be renamed to mod_stat12, mod_sstat or
some such?</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_xes.mod_xes.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_xes.mod_xes.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The endjob() function finalises the mean and standard deviation
images and writes them to disk.</p>
<p>&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.mod_xes.mod_xes.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.mod_xes.mod_xes.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.parse_calib">
<span id="xfel-cxi-cspad-ana-parse-calib-module"></span><h2>xfel.cxi.cspad_ana.parse_calib module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.parse_calib" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.parse_calib.Section">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.parse_calib.</code><code class="sig-name descname">Section</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">angle</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">center</span><span class="o">=</span><span class="default_value">0, 0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.Section" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class for a section, or a pair of ASIC:s, or a two-by-one.  A
quadrant (and to some extent a section) is really an imaginary
object–the detector only reads out the ASIC:s.  The metrology
should be accurate to +/- one pixel, usually better but occasionally
worse.  XXX Is it a section, a two-by-one, or a sensor?</p>
<p>This class adopts a matrix-oriented coordinate system.  The origin
is in the top left corner, the first coordinate increases downwards,
the second coordinate increases to the right, and the third
coordinate increases towards the viewer.  In this right-handed
coordinate system, a rotation by a positive angle is
counter-clockwise in the plane of the two first coordinates.</p>
<p>&#64;note There are a few hard coded numbers throughout this class.</p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.parse_calib.Section.corners">
<code class="sig-name descname">corners</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">right</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.Section.corners" title="Permalink to this definition">¶</a></dt>
<dd><p>The corners() function returns an array of the four corners of
the section, in counter-clockwise order.  Each vertex is a
two-dimensional array of the plane components.  XXX Maybe better
named corners_section()?</p>
<p>&#64;param right &#64;c True to restrict rotations to right angles
&#64;return      Coordinates of the four corners, in counter-clockwise</p>
<blockquote>
<div><p>order</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.parse_calib.Section.corners_asic">
<code class="sig-name descname">corners_asic</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.Section.corners_asic" title="Permalink to this definition">¶</a></dt>
<dd><p>The corners_asic() function returns a list of pixel indices
which position the two ASIC:s on the detector, in order from top
to bottom by the “standing up” convention.  Each list of indices
gives the coordinates of the top, left and bottom, right corners
of the section’s ASIC:s in “spotfinder format”.</p>
</dd></dl>

<dl class="py attribute">
<dt id="xfel.cxi.cspad_ana.parse_calib.Section.q_size">
<code class="sig-name descname">q_size</code><em class="property"> = (850, 850)</em><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.Section.q_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.parse_calib.Section.qrotate">
<code class="sig-name descname">qrotate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">angle</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.Section.qrotate" title="Permalink to this definition">¶</a></dt>
<dd><p>The qrotate() function rotates the section counter-clockwise
by &#64;p angle degrees around the centre of its quadrant.  The
rotation angle is rounded to an integer multiple of 90 degrees
prior to transformation.  Rotation around the quadrant centre
changes the location and the orientation of the section.</p>
<p>&#64;param angle Rotation angle, in degrees</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.parse_calib.Section.srotate">
<code class="sig-name descname">srotate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">angle</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.Section.srotate" title="Permalink to this definition">¶</a></dt>
<dd><p>The srotate() function rotates the section counter-clockwise by
&#64;p angle degrees around its centre.  Rotation within the quadrant
only changes the orientation of the section.</p>
<p>&#64;param angle Rotation angle, in degrees</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.parse_calib.Section.translate">
<code class="sig-name descname">translate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">displacement</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.Section.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>The translate() function displaces the section.</p>
<dl class="simple">
<dt>&#64;param displacement Two-dimensional array of the additive</dt><dd><p>displacement</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.parse_calib.calib2sections">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.parse_calib.</code><code class="sig-name descname">calib2sections</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dirname</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.calib2sections" title="Permalink to this definition">¶</a></dt>
<dd><p>The calib2sections() function reads calibration information
stored in the directory tree beneath &#64;p dirname and returns a
two-dimensional array of Section objects.  The first index in the
returned array identifies the quadrant, and the second index
identifies the section within the quadrant.</p>
<p>&#64;param dirname Directory with calibration information
&#64;return        Section objects</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.parse_calib.calib2tensor3">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.parse_calib.</code><code class="sig-name descname">calib2tensor3</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dirname</span></em>, <em class="sig-param"><span class="n">component</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.calib2tensor3" title="Permalink to this definition">¶</a></dt>
<dd><p>The calib2tensor3() function reads the latest calibration tensor
for &#64;p component from &#64;p dirname.  Any obsoleted calibration data is
ignored.  The function returns the tensor as a numpy array on
successful completion.</p>
<p>&#64;param dirname   Directory with calibration information
&#64;param component Kind of calibration data sought
&#64;return          Tensor as numpy array</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.parse_calib.fread_matrix">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.parse_calib.</code><code class="sig-name descname">fread_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stream</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.fread_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>The fread_matrix() function reads a vector or matrix from the
stream pointed to by &#64;p stream and returns it as a numpy array.</p>
<p>&#64;param stream Stream object
&#64;return       Tensor as numpy array</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.parse_calib.fread_tensor3">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.parse_calib.</code><code class="sig-name descname">fread_tensor3</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stream</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.fread_tensor3" title="Permalink to this definition">¶</a></dt>
<dd><p>The fread_tensor3() function reads a tensor of rank no greater
than 3 from the stream pointed to by &#64;p stream and returns it as a
numpy array.</p>
<p>&#64;param stream Stream object
&#64;return       Tensor as numpy array</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.parse_calib.fread_vector">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.parse_calib.</code><code class="sig-name descname">fread_vector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stream</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.fread_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>The fread_vector() function reads a vector from the stream
pointed to by &#64;p stream and returns it as a numpy array.</p>
<p>&#64;param stream Stream object
&#64;return       Tensor as numpy array</p>
</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.parse_calib.v2calib2sections">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.parse_calib.</code><code class="sig-name descname">v2calib2sections</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.parse_calib.v2calib2sections" title="Permalink to this definition">¶</a></dt>
<dd><p>The v2calib2sections() function reads calibration information
stored in new style SLAC calibration file and returns a
two-dimensional array of Section objects.  The first index in the
returned array identifies the quadrant, and the second index
identifies the section within the quadrant.</p>
<p>&#64;param dirname Directory with calibration information
&#64;return        Section objects</p>
</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.pixel_histograms">
<span id="xfel-cxi-cspad-ana-pixel-histograms-module"></span><h2>xfel.cxi.cspad_ana.pixel_histograms module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.pixel_histograms" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="xfel.cxi.cspad_ana.pixel_histograms.pixel_histograms">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.pixel_histograms.</code><code class="sig-name descname">pixel_histograms</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">address</span></em>, <em class="sig-param"><span class="n">pickle_dirname</span><span class="o">=</span><span class="default_value">'.'</span></em>, <em class="sig-param"><span class="n">pickle_basename</span><span class="o">=</span><span class="default_value">'hist'</span></em>, <em class="sig-param"><span class="n">roi</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">hist_min</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">hist_max</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">n_slots</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.pixel_histograms.pixel_histograms" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#xfel.cxi.cspad_ana.common_mode.common_mode_correction" title="xfel.cxi.cspad_ana.common_mode.common_mode_correction"><code class="xref py py-class docutils literal notranslate"><span class="pre">xfel.cxi.cspad_ana.common_mode.common_mode_correction</span></code></a></p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.pixel_histograms.pixel_histograms.beginjob">
<code class="sig-name descname">beginjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.pixel_histograms.pixel_histograms.beginjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The beginjob() function does one-time initialisation from
event- or environment data.  It is called at an XTC configure
transition.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.pixel_histograms.pixel_histograms.endjob">
<code class="sig-name descname">endjob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj1</span></em>, <em class="sig-param"><span class="n">obj2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.pixel_histograms.pixel_histograms.endjob" title="Permalink to this definition">¶</a></dt>
<dd><p>The endjob() function finalises the mean and standard deviation
images and writes them to disk.
&#64;param evt Event object (psana only)
&#64;param env Environment object</p>
</dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.pixel_histograms.pixel_histograms.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">evt</span></em>, <em class="sig-param"><span class="n">env</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.pixel_histograms.pixel_histograms.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The event() function is called for every L1Accept transition.
Once self.nshots shots are accumulated, this function turns into
a nop.</p>
<p>&#64;param evt Event data object, a configure object
&#64;param env Environment object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.xes_finalise">
<span id="xfel-cxi-cspad-ana-xes-finalise-module"></span><h2>xfel.cxi.cspad_ana.xes_finalise module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.xes_finalise" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="xfel.cxi.cspad_ana.xes_finalise.cspad2x2_bad_pixel_mask_cxi_run7">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">cspad2x2_bad_pixel_mask_cxi_run7</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.cspad2x2_bad_pixel_mask_cxi_run7" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.xes_finalise.cspad_unbound_pixel_mask">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">cspad_unbound_pixel_mask</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.cspad_unbound_pixel_mask" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.xes_finalise.filter_outlying_pixels">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">filter_outlying_pixels</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spectrum_focus</span></em>, <em class="sig-param"><span class="n">mask_focus</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.filter_outlying_pixels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="xfel.cxi.cspad_ana.xes_finalise.finalise_one_run">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">finalise_one_run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scratch_dir</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.finalise_one_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="xfel.cxi.cspad_ana.xes_finalise.first_moment_analysis">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">first_moment_analysis</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.first_moment_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="xfel.cxi.cspad_ana.xes_finalise.first_moment_analysis.as_trace">
<code class="sig-name descname">as_trace</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.first_moment_analysis.as_trace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="xfel.cxi.cspad_ana.xes_finalise.first_moment_analysis.calculate">
<code class="sig-name descname">calculate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.first_moment_analysis.calculate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.xes_finalise.get_spectrum">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">get_spectrum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spectrum_focus</span></em>, <em class="sig-param"><span class="n">mask_focus</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.get_spectrum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.xes_finalise.output_image">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">output_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flex_img</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">invert</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.output_image" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.xes_finalise.output_matlab_form">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">output_matlab_form</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flex_matrix</span></em>, <em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.output_matlab_form" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.xes_finalise.output_spectrum">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">output_spectrum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spectrum_focus</span></em>, <em class="sig-param"><span class="n">mask_focus</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">output_dirname</span><span class="o">=</span><span class="default_value">'.'</span></em>, <em class="sig-param"><span class="n">run</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.output_spectrum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.xes_finalise.plot_energy">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">plot_energy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plot_x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.plot_energy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="xfel.cxi.cspad_ana.xes_finalise.spec_plot">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">spec_plot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">img</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">figure_size</span><span class="o">=</span><span class="default_value">10, 5</span></em>, <em class="sig-param"><span class="n">transparent</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.spec_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="xfel.cxi.cspad_ana.xes_finalise.xes_finalise">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_finalise.</code><code class="sig-name descname">xes_finalise</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">runs</span></em>, <em class="sig-param"><span class="n">output_dirname</span><span class="o">=</span><span class="default_value">'.'</span></em>, <em class="sig-param"><span class="n">roi</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_finalise.xes_finalise" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana.xes_histograms">
<span id="xfel-cxi-cspad-ana-xes-histograms-module"></span><h2>xfel.cxi.cspad_ana.xes_histograms module<a class="headerlink" href="#module-xfel.cxi.cspad_ana.xes_histograms" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="xfel.cxi.cspad_ana.xes_histograms.run">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_histograms.</code><code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_histograms.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="xfel.cxi.cspad_ana.xes_histograms.xes_from_histograms">
<em class="property">class </em><code class="sig-prename descclassname">xfel.cxi.cspad_ana.xes_histograms.</code><code class="sig-name descname">xes_from_histograms</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pixel_histograms</span></em>, <em class="sig-param"><span class="n">output_dirname</span><span class="o">=</span><span class="default_value">'.'</span></em>, <em class="sig-param"><span class="n">gain_map_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">gain_map</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'photon_counting'</span></em>, <em class="sig-param"><span class="n">estimated_gain</span><span class="o">=</span><span class="default_value">30</span></em>, <em class="sig-param"><span class="n">nproc</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">photon_threshold</span><span class="o">=</span><span class="default_value">0.6666666666666666</span></em>, <em class="sig-param"><span class="n">roi</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">run</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.xes_histograms.xes_from_histograms" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

</div>
<div class="section" id="module-xfel.cxi.cspad_ana">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-xfel.cxi.cspad_ana" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="xfel.cxi.cspad_ana.skip_event_flag">
<code class="sig-prename descclassname">xfel.cxi.cspad_ana.</code><code class="sig-name descname">skip_event_flag</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#xfel.cxi.cspad_ana.skip_event_flag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">xfel.cxi.cspad_ana package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.average_tbx">xfel.cxi.cspad_ana.average_tbx module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.common_mode">xfel.cxi.cspad_ana.common_mode module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.cspad_tbx">xfel.cxi.cspad_ana.cspad_tbx module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.display_calib">xfel.cxi.cspad_ana.display_calib module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.histogram_finalise">xfel.cxi.cspad_ana.histogram_finalise module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.hitfinder_tbx">xfel.cxi.cspad_ana.hitfinder_tbx module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_average">xfel.cxi.cspad_ana.mod_average module</a></li>
<li><a class="reference internal" href="#xfel-cxi-cspad-ana-mod-average-cbf-module">xfel.cxi.cspad_ana.mod_average_cbf module</a></li>
<li><a class="reference internal" href="#xfel-cxi-cspad-ana-mod-cbf-hitfind-module">xfel.cxi.cspad_ana.mod_cbf_hitfind module</a></li>
<li><a class="reference internal" href="#xfel-cxi-cspad-ana-mod-cbf-index-module">xfel.cxi.cspad_ana.mod_cbf_index module</a></li>
<li><a class="reference internal" href="#xfel-cxi-cspad-ana-mod-cspad-cbf-module">xfel.cxi.cspad_ana.mod_cspad_cbf module</a></li>
<li><a class="reference internal" href="#xfel-cxi-cspad-ana-mod-cspad-cbf-dump-module">xfel.cxi.cspad_ana.mod_cspad_cbf_dump module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_daq_status">xfel.cxi.cspad_ana.mod_daq_status module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_dump">xfel.cxi.cspad_ana.mod_dump module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_dump_bitmap">xfel.cxi.cspad_ana.mod_dump_bitmap module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_event_info">xfel.cxi.cspad_ana.mod_event_info module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_filter">xfel.cxi.cspad_ana.mod_filter module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_hdf5">xfel.cxi.cspad_ana.mod_hdf5 module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_hitfind">xfel.cxi.cspad_ana.mod_hitfind module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_illumination_filter">xfel.cxi.cspad_ana.mod_illumination_filter module</a></li>
<li><a class="reference internal" href="#xfel-cxi-cspad-ana-mod-ledge-module">xfel.cxi.cspad_ana.mod_ledge module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_mar">xfel.cxi.cspad_ana.mod_mar module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_param">xfel.cxi.cspad_ana.mod_param module</a></li>
<li><a class="reference internal" href="#xfel-cxi-cspad-ana-mod-pickle2cbf-dump-module">xfel.cxi.cspad_ana.mod_pickle2cbf_dump module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_pulnix_dump">xfel.cxi.cspad_ana.mod_pulnix_dump module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_radial_average">xfel.cxi.cspad_ana.mod_radial_average module</a></li>
<li><a class="reference internal" href="#xfel-cxi-cspad-ana-mod-spectra-module">xfel.cxi.cspad_ana.mod_spectra module</a></li>
<li><a class="reference internal" href="#xfel-cxi-cspad-ana-mod-spectra-view-module">xfel.cxi.cspad_ana.mod_spectra_view module</a></li>
<li><a class="reference internal" href="#xfel-cxi-cspad-ana-mod-view-module">xfel.cxi.cspad_ana.mod_view module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.mod_xes">xfel.cxi.cspad_ana.mod_xes module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.parse_calib">xfel.cxi.cspad_ana.parse_calib module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.pixel_histograms">xfel.cxi.cspad_ana.pixel_histograms module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.xes_finalise">xfel.cxi.cspad_ana.xes_finalise module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana.xes_histograms">xfel.cxi.cspad_ana.xes_histograms module</a></li>
<li><a class="reference internal" href="#module-xfel.cxi.cspad_ana">Module contents</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/xfel/xfel.cxi.cspad_ana.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CCTBX Developer documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">xfel.cxi.cspad_ana package</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, University of California.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.1.
    </div>
  </body>
</html>