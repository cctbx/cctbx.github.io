
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>mmtbx.ncs &#8212; CCTBX Developer documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mmtbx.pdbtools - model manipulation utilities" href="mmtbx.pdbtools.html" />
    <link rel="prev" title="mmtbx.monomer_library package" href="mmtbx.monomer_library.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mmtbx.pdbtools.html" title="mmtbx.pdbtools - model manipulation utilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mmtbx.monomer_library.html" title="mmtbx.monomer_library package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CCTBX Developer documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="mmtbx.html" accesskey="U">mmtbx - macromolecular crystallography</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mmtbx-ncs">
<h1><a class="toc-backref" href="#id1">mmtbx.ncs</a><a class="headerlink" href="#mmtbx-ncs" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#mmtbx-ncs" id="id1">mmtbx.ncs</a><ul>
<li><a class="reference internal" href="#submodules" id="id2">Submodules</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ligands" id="id3">mmtbx.ncs.ligands module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ncs" id="id4">mmtbx.ncs.ncs module</a></li>
<li><a class="reference internal" href="#mmtbx-ncs-restraints-module" id="id5">mmtbx.ncs.restraints module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ncs_search" id="id6">mmtbx.ncs.ncs_search module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ncs_utils" id="id7">mmtbx.ncs.ncs_utils module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs" id="id8">Module contents</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="submodules">
<h2><a class="toc-backref" href="#id2">Submodules</a><a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mmtbx.ncs.ligands">
<span id="mmtbx-ncs-ligands-module"></span><h2><a class="toc-backref" href="#id3">mmtbx.ncs.ligands module</a><a class="headerlink" href="#module-mmtbx.ncs.ligands" title="Permalink to this headline">¶</a></h2>
<p>Post-fitting cleanup of ligand positions to match NCS operations present in
protein model.  This can be used to recover cases where one copy is placed
successfully but another misses due to interfering protein atoms, weak density,
false positive in empty protein density, etc.  It can also accelerate ligand
placement for large structures if at least one copy is already placed with high
confidence.  Should only be used when the initial placement (e.g. LigandFit CC)
is sufficiently good.</p>
<p>Usually this will be called via the command mmtbx.apply_ncs_to_ligand.</p>
<dl class="class">
<dt id="mmtbx.ncs.ligands.apply_ligand_ncs">
<em class="property">class </em><code class="descclassname">mmtbx.ncs.ligands.</code><code class="descname">apply_ligand_ncs</code><span class="sig-paren">(</span><em>pdb_hierarchy</em>, <em>fmodel</em>, <em>ligand_code</em>, <em>params</em>, <em>atom_selection=None</em>, <em>add_new_ligands_to_pdb=False</em>, <em>only_segid=None</em>, <em>log=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.apply_ligand_ncs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Wrapper class; this should be the primary entry point for external calling
routines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pdb_hierarchy</strong> – initial model with one or more copies of the target
ligand</li>
<li><strong>fmodel</strong> – mmtbx.f_model.manager object corresponding to the model</li>
<li><strong>ligand_code</strong> – three-letter residue name of ligand</li>
<li><strong>params</strong> – phil scope_extract object for ncs_ligand_phil</li>
<li><strong>atom_selection</strong> – selection for reference ligand (default: search for
all copies and pick one with the best CC)</li>
<li><strong>add_new_ligands_to_pdb</strong> – generate combined PDB hierarchy and fmodel
with new ligands incorporated</li>
<li><strong>only_segid</strong> – </li>
<li><strong>log</strong> – filehandle-like object</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="mmtbx.ncs.ligands.apply_ligand_ncs.n_ligands">
<code class="descname">n_ligands</code><a class="headerlink" href="#mmtbx.ncs.ligands.apply_ligand_ncs.n_ligands" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ligands.apply_ligand_ncs.write_maps">
<code class="descname">write_maps</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.apply_ligand_ncs.write_maps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ligands.apply_ligand_ncs.write_pdb">
<code class="descname">write_pdb</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.apply_ligand_ncs.write_pdb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ligands.combine_ligands_and_hierarchy">
<code class="descclassname">mmtbx.ncs.ligands.</code><code class="descname">combine_ligands_and_hierarchy</code><span class="sig-paren">(</span><em>pdb_hierarchy</em>, <em>ligands</em>, <em>log=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.combine_ligands_and_hierarchy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ligands.extract_ligand_residues">
<code class="descclassname">mmtbx.ncs.ligands.</code><code class="descname">extract_ligand_residues</code><span class="sig-paren">(</span><em>pdb_hierarchy</em>, <em>ligand_code</em>, <em>atom_selection=None</em>, <em>only_segid=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.extract_ligand_residues" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the atom_group object(s) with given 3-character residue name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pdb_hierarchy</strong> – input model</li>
<li><strong>ligand_code</strong> – 3-letter residue ID</li>
<li><strong>atom_selection</strong> – optional flex.bool object specifying ligand selection
to use</li>
<li><strong>only_segid</strong> – optional segid which ligand(s) must match</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of atom_group objects</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="mmtbx.ncs.ligands.get_final_maps_and_cc">
<em class="property">class </em><code class="descclassname">mmtbx.ncs.ligands.</code><code class="descname">get_final_maps_and_cc</code><span class="sig-paren">(</span><em>fmodel</em>, <em>ligands</em>, <em>params</em>, <em>log</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.get_final_maps_and_cc" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="mmtbx.ncs.ligands.get_final_maps_and_cc.write_maps">
<code class="descname">write_maps</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.get_final_maps_and_cc.write_maps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mmtbx.ncs.ligands.group_operators">
<em class="property">class </em><code class="descclassname">mmtbx.ncs.ligands.</code><code class="descname">group_operators</code><span class="sig-paren">(</span><em>selection</em>, <em>sele_str</em>, <em>sites_cart</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.group_operators" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Object for storing information about NCS relationships relative to an
atom selection, i.e. given four identical chains A, B, C, and D, this might
store information about chain B and the NCS operators for approximate
superpositioning on chains A, C, and D.</p>
<dl class="method">
<dt id="mmtbx.ncs.ligands.group_operators.add_operator">
<code class="descname">add_operator</code><span class="sig-paren">(</span><em>ops</em>, <em>sele_str</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.group_operators.add_operator" title="Permalink to this definition">¶</a></dt>
<dd><p>Save an NCS operator and corresponding atom selection.</p>
</dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ligands.group_operators.distance_from_center">
<code class="descname">distance_from_center</code><span class="sig-paren">(</span><em>sites</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.group_operators.distance_from_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the distance between centers-of-mass of this selection and the
given sites.  Used to determine ligand-protein chain relationships.</p>
</dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ligands.group_operators.show_summary">
<code class="descname">show_summary</code><span class="sig-paren">(</span><em>out=None</em>, <em>prefix=''</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.group_operators.show_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Print out selections and NCS operators.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ligands.remove_clashing_atoms">
<code class="descclassname">mmtbx.ncs.ligands.</code><code class="descname">remove_clashing_atoms</code><span class="sig-paren">(</span><em>xray_structure</em>, <em>pdb_hierarchy</em>, <em>ligands</em>, <em>params</em>, <em>log</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.remove_clashing_atoms" title="Permalink to this definition">¶</a></dt>
<dd><p>Since the transformed ligands will very frequently overlap with existing
atoms, these need to be deleted if we are confident about the new positions.</p>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ligands.resid_str">
<code class="descclassname">mmtbx.ncs.ligands.</code><code class="descname">resid_str</code><span class="sig-paren">(</span><em>atom</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.resid_str" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="mmtbx.ncs.ligands.sample_operators">
<em class="property">class </em><code class="descclassname">mmtbx.ncs.ligands.</code><code class="descname">sample_operators</code><span class="sig-paren">(</span><em>pdb_hierarchy</em>, <em>fmodel</em>, <em>ncs_operators</em>, <em>ligands</em>, <em>params</em>, <em>log=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.sample_operators" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Determines an appropriate “reference” ligand, and samples the density around
sites transformed by each operator, applying the best operator to the
other ligand copies if meeting cutoff criteria.</p>
<dl class="method">
<dt id="mmtbx.ncs.ligands.sample_operators.get_new_fcalc_map">
<code class="descname">get_new_fcalc_map</code><span class="sig-paren">(</span><em>sites_new</em>, <em>i_seqs</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.sample_operators.get_new_fcalc_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ligands.sample_operators.get_sites_cc">
<code class="descname">get_sites_cc</code><span class="sig-paren">(</span><em>atoms</em>, <em>sites=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.sample_operators.get_sites_cc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ligands.sample_operators.setup_maps">
<code class="descname">setup_maps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.sample_operators.setup_maps" title="Permalink to this definition">¶</a></dt>
<dd><p>Create 2mFo-DFc, mFo-DFc, and Fc maps.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ligands.xyz_distance">
<code class="descclassname">mmtbx.ncs.ligands.</code><code class="descname">xyz_distance</code><span class="sig-paren">(</span><em>xyz1</em>, <em>xyz2</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.xyz_distance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mmtbx.ncs.ncs">
<span id="mmtbx-ncs-ncs-module"></span><h2><a class="toc-backref" href="#id4">mmtbx.ncs.ncs module</a><a class="headerlink" href="#module-mmtbx.ncs.ncs" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="mmtbx.ncs.ncs.abs">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">abs</code><span class="sig-paren">(</span><em>aa</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.abs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.crystal_symmetry_to_ncs">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">crystal_symmetry_to_ncs</code><span class="sig-paren">(</span><em>crystal_symmetry=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.crystal_symmetry_to_ncs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.euler_frac_to_rot_trans">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">euler_frac_to_rot_trans</code><span class="sig-paren">(</span><em>euler_values</em>, <em>frac</em>, <em>unit_cell</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.euler_frac_to_rot_trans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.generate_ncs_ops">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">generate_ncs_ops</code><span class="sig-paren">(</span><em>symmetry=None</em>, <em>helical_rot_deg=None</em>, <em>helical_trans_z_angstrom=None</em>, <em>op_max=None</em>, <em>two_fold_along_x=None</em>, <em>include_helical_symmetry=None</em>, <em>max_helical_ops_to_check=None</em>, <em>require_helical_or_point_group_symmetry=None</em>, <em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.generate_ncs_ops" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.get_c_symmetry">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">get_c_symmetry</code><span class="sig-paren">(</span><em>n=None</em>, <em>is_d=False</em>, <em>two_fold_along_x=None</em>, <em>ncs_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_c_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.get_d_symmetry">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">get_d_symmetry</code><span class="sig-paren">(</span><em>n=None</em>, <em>two_fold_along_x=True</em>, <em>ncs_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_d_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.get_helical_symmetry">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">get_helical_symmetry</code><span class="sig-paren">(</span><em>helical_rot_deg=None</em>, <em>helical_trans_z_angstrom=None</em>, <em>max_ops=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_helical_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.get_ncs_from_text">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">get_ncs_from_text</code><span class="sig-paren">(</span><em>text=None</em>, <em>text_is_ncs_spec=None</em>, <em>rotate_about_z=None</em>, <em>rotate_about_y=None</em>, <em>rotate_about_new_y=None</em>, <em>ncs_name=None</em>, <em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_ncs_from_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.get_rot_y">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">get_rot_y</code><span class="sig-paren">(</span><em>rot_deg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_rot_y" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.get_rot_z">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">get_rot_z</code><span class="sig-paren">(</span><em>rot_deg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_rot_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.is_identity">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">is_identity</code><span class="sig-paren">(</span><em>r</em>, <em>t</em>, <em>tol=0.01</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.is_identity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.is_in_range">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">is_in_range</code><span class="sig-paren">(</span><em>z</em>, <em>z_min</em>, <em>z_max</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.is_in_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.is_same_transform">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">is_same_transform</code><span class="sig-paren">(</span><em>r1</em>, <em>t1</em>, <em>r2</em>, <em>t2</em>, <em>tol_r=0.02</em>, <em>abs_tol_t=2.0</em>, <em>rel_tol_t=0.05</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.is_same_transform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="mmtbx.ncs.ncs.ncs">
<em class="property">class </em><code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">ncs</code><span class="sig-paren">(</span><em>exclude_h=None</em>, <em>exclude_d=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.add_cc_list">
<code class="descname">add_cc_list</code><span class="sig-paren">(</span><em>cc_list</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.add_cc_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.add_identity_op">
<code class="descname">add_identity_op</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.add_identity_op" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.add_source_info">
<code class="descname">add_source_info</code><span class="sig-paren">(</span><em>source_info</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.add_source_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.adjust_magnification">
<code class="descname">adjust_magnification</code><span class="sig-paren">(</span><em>magnification=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.adjust_magnification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.change_of_basis">
<code class="descname">change_of_basis</code><span class="sig-paren">(</span><em>change_of_basis_operator=None</em>, <em>unit_cell=None</em>, <em>new_unit_cell=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.change_of_basis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.coordinate_offset">
<code class="descname">coordinate_offset</code><span class="sig-paren">(</span><em>coordinate_offset=None</em>, <em>unit_cell=None</em>, <em>new_unit_cell=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.coordinate_offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.deep_copy">
<code class="descname">deep_copy</code><span class="sig-paren">(</span><em>change_of_basis_operator=None</em>, <em>unit_cell=None</em>, <em>coordinate_offset=None</em>, <em>scale_factor=None</em>, <em>new_unit_cell=None</em>, <em>ops_to_keep=None</em>, <em>extract_point_group_symmetry=None</em>, <em>hierarchy_to_match_order=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.deep_copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.display_all">
<code class="descname">display_all</code><span class="sig-paren">(</span><em>verbose=True</em>, <em>log=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.display_all" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.extend_helix_operators">
<code class="descname">extend_helix_operators</code><span class="sig-paren">(</span><em>z_range=None</em>, <em>tol_z=0.01</em>, <em>max_operators=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.extend_helix_operators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.format_all_for_group_specification">
<code class="descname">format_all_for_group_specification</code><span class="sig-paren">(</span><em>log=None</em>, <em>quiet=True</em>, <em>out=None</em>, <em>file_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_all_for_group_specification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.format_all_for_phenix_refine">
<code class="descname">format_all_for_phenix_refine</code><span class="sig-paren">(</span><em>quiet=False</em>, <em>out=None</em>, <em>prefix='refinement.pdb_interpretation.ncs_group'</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_all_for_phenix_refine" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is an older version of creating phil for phenix refine,
it is modified to replicate a new phil parameters that can handle
selection to the level of atoms, “format_phil_for_phenix_refine”.</p>
<p>When it will still can be used in the older form, which allows only
residue level selection.</p>
</dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.format_all_for_resolve">
<code class="descname">format_all_for_resolve</code><span class="sig-paren">(</span><em>log=None</em>, <em>quiet=False</em>, <em>out=None</em>, <em>crystal_number=None</em>, <em>skip_identity_if_first=False</em>, <em>ncs_domain_pdb=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_all_for_resolve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.format_phil_for_ncs">
<code class="descname">format_phil_for_ncs</code><span class="sig-paren">(</span><em>log=None</em>, <em>quiet=False</em>, <em>out=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_phil_for_ncs" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes NCS phil selection in NCS format</p>
</dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.format_phil_for_phenix_refine">
<code class="descname">format_phil_for_phenix_refine</code><span class="sig-paren">(</span><em>log=None</em>, <em>quiet=False</em>, <em>out=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_phil_for_phenix_refine" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes NCS phil selection in phenix_refine format</p>
</dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.get_1_char_after_key">
<code class="descname">get_1_char_after_key</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_1_char_after_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.get_1_value_after_key">
<code class="descname">get_1_value_after_key</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_1_value_after_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.get_3_values_after_key">
<code class="descname">get_3_values_after_key</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_3_values_after_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.get_helix_parameters">
<code class="descname">get_helix_parameters</code><span class="sig-paren">(</span><em>z_range=None</em>, <em>tol_z=0.01</em>, <em>max_operators=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_helix_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.get_ncs_name">
<code class="descname">get_ncs_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_ncs_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.get_res_range_after_key">
<code class="descname">get_res_range_after_key</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_res_range_after_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.identity_op_id_in_first_group">
<code class="descname">identity_op_id_in_first_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.identity_op_id_in_first_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.import_ncs_group">
<code class="descname">import_ncs_group</code><span class="sig-paren">(</span><em>ncs_rota_matr=None</em>, <em>center_orth=None</em>, <em>trans_orth=None</em>, <em>chain_residue_id=None</em>, <em>residues_in_common_list=None</em>, <em>rmsd_list=None</em>, <em>ncs_domain_pdb=None</em>, <em>cc=None</em>, <em>source_of_ncs_info=None</em>, <em>ncs_group_object=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.import_ncs_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.init_ncs_group">
<code class="descname">init_ncs_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.init_ncs_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.init_oper">
<code class="descname">init_oper</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.init_oper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.invert_matrices">
<code class="descname">invert_matrices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.invert_matrices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.is_helical_along_z">
<code class="descname">is_helical_along_z</code><span class="sig-paren">(</span><em>tol_r=0.02</em>, <em>abs_tol_t=2.0</em>, <em>rel_tol_t=0.05</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.is_helical_along_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.is_point_group_symmetry">
<code class="descname">is_point_group_symmetry</code><span class="sig-paren">(</span><em>tol_r=0.02</em>, <em>abs_tol_t=2.0</em>, <em>rel_tol_t=0.05</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.is_point_group_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.magnification">
<code class="descname">magnification</code><span class="sig-paren">(</span><em>scale_factor=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.magnification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.map_inside_unit_cell">
<code class="descname">map_inside_unit_cell</code><span class="sig-paren">(</span><em>unit_cell=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.map_inside_unit_cell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.max_operators">
<code class="descname">max_operators</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.max_operators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.ncs_from_import">
<code class="descname">ncs_from_import</code><span class="sig-paren">(</span><em>rot_list=None</em>, <em>trans_list=None</em>, <em>invert_matrices=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.ncs_from_import" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.ncs_from_pdb_input_BIOMT">
<code class="descname">ncs_from_pdb_input_BIOMT</code><span class="sig-paren">(</span><em>pdb_inp=None</em>, <em>log=None</em>, <em>quiet=False</em>, <em>invert_matrices=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.ncs_from_pdb_input_BIOMT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.ncs_groups">
<code class="descname">ncs_groups</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.ncs_groups" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.ncs_oper_in_first_group">
<code class="descname">ncs_oper_in_first_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.ncs_oper_in_first_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.ncs_read">
<code class="descname">ncs_read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.ncs_read" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.overall_cc">
<code class="descname">overall_cc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.overall_cc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.overall_note">
<code class="descname">overall_note</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.overall_note" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.overall_rmsd">
<code class="descname">overall_rmsd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.overall_rmsd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.read_ncs">
<code class="descname">read_ncs</code><span class="sig-paren">(</span><em>file_name=None</em>, <em>lines=[]</em>, <em>source_info=''</em>, <em>log=None</em>, <em>quiet=False</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.read_ncs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.rotate_about_y">
<code class="descname">rotate_about_y</code><span class="sig-paren">(</span><em>rot_deg=None</em>, <em>invert_matrices=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.rotate_about_y" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.rotate_about_z">
<code class="descname">rotate_about_z</code><span class="sig-paren">(</span><em>rot_deg=None</em>, <em>invert_matrices=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.rotate_about_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.rotate_matrices">
<code class="descname">rotate_matrices</code><span class="sig-paren">(</span><em>rot=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.rotate_matrices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.save_existing_group_info">
<code class="descname">save_existing_group_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.save_existing_group_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.save_ncs_group">
<code class="descname">save_ncs_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.save_ncs_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.save_oper">
<code class="descname">save_oper</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.save_oper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.select_first_ncs_group">
<code class="descname">select_first_ncs_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.select_first_ncs_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.select_first_ncs_operator">
<code class="descname">select_first_ncs_operator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.select_first_ncs_operator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.set_ncs_name">
<code class="descname">set_ncs_name</code><span class="sig-paren">(</span><em>ncs_name</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.set_ncs_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.set_unit_ncs">
<code class="descname">set_unit_ncs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.set_unit_ncs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs.sort_by_z_translation">
<code class="descname">sort_by_z_translation</code><span class="sig-paren">(</span><em>tol_z=0.01</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.sort_by_z_translation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mmtbx.ncs.ncs.ncs_group">
<em class="property">class </em><code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">ncs_group</code><span class="sig-paren">(</span><em>ncs_rota_matr=None</em>, <em>center_orth=None</em>, <em>trans_orth=None</em>, <em>chain_residue_id=None</em>, <em>source_of_ncs_info=None</em>, <em>rmsd_list=None</em>, <em>ncs_domain_pdb=None</em>, <em>residues_in_common_list=None</em>, <em>cc=None</em>, <em>note=None</em>, <em>exclude_h=None</em>, <em>exclude_d=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_cc">
<code class="descname">add_cc</code><span class="sig-paren">(</span><em>cc</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_cc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_chain_residue_id">
<code class="descname">add_chain_residue_id</code><span class="sig-paren">(</span><em>chain_residue_id</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_chain_residue_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_identity_op">
<code class="descname">add_identity_op</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_identity_op" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_note">
<code class="descname">add_note</code><span class="sig-paren">(</span><em>note</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_note" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_residues_in_common_list">
<code class="descname">add_residues_in_common_list</code><span class="sig-paren">(</span><em>residues_in_common_list</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_residues_in_common_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_rmsd_list">
<code class="descname">add_rmsd_list</code><span class="sig-paren">(</span><em>rmsd_list</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_rmsd_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.adjust_magnification">
<code class="descname">adjust_magnification</code><span class="sig-paren">(</span><em>magnification=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.adjust_magnification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.apply_cob_to_vector">
<code class="descname">apply_cob_to_vector</code><span class="sig-paren">(</span><em>vector=None</em>, <em>change_of_basis_operator=None</em>, <em>coordinate_offset=None</em>, <em>unit_cell=None</em>, <em>new_unit_cell=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.apply_cob_to_vector" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.cc">
<code class="descname">cc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.cc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.centers">
<code class="descname">centers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.centers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.chain_residue_id">
<code class="descname">chain_residue_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.chain_residue_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.copy_rot_trans">
<code class="descname">copy_rot_trans</code><span class="sig-paren">(</span><em>list_of_matrices</em>, <em>list_of_translations</em>, <em>change_of_basis_operator=None</em>, <em>coordinate_offset=None</em>, <em>scale_factor=None</em>, <em>unit_cell=None</em>, <em>new_unit_cell=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.copy_rot_trans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.copy_vector_list">
<code class="descname">copy_vector_list</code><span class="sig-paren">(</span><em>list_of_vectors</em>, <em>change_of_basis_operator=None</em>, <em>coordinate_offset=None</em>, <em>scale_factor=None</em>, <em>unit_cell=None</em>, <em>new_unit_cell=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.copy_vector_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.deep_copy">
<code class="descname">deep_copy</code><span class="sig-paren">(</span><em>change_of_basis_operator=None</em>, <em>unit_cell=None</em>, <em>coordinate_offset=None</em>, <em>new_unit_cell=None</em>, <em>scale_factor=None</em>, <em>extract_point_group_symmetry=None</em>, <em>ops_to_keep=None</em>, <em>hierarchy_to_match_order=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.deep_copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.deep_copy_ops_to_keep">
<code class="descname">deep_copy_ops_to_keep</code><span class="sig-paren">(</span><em>ops_to_keep=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.deep_copy_ops_to_keep" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.deep_copy_order">
<code class="descname">deep_copy_order</code><span class="sig-paren">(</span><em>hierarchy_to_match_order=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.deep_copy_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.delete_inv">
<code class="descname">delete_inv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.delete_inv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.display_summary">
<code class="descname">display_summary</code><span class="sig-paren">(</span><em>verbose=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.display_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.extend_helix_operators">
<code class="descname">extend_helix_operators</code><span class="sig-paren">(</span><em>z_range=None</em>, <em>tol_z=0.01</em>, <em>max_operators=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.extend_helix_operators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.extract_point_group_symmetry">
<code class="descname">extract_point_group_symmetry</code><span class="sig-paren">(</span><em>tol_r=None</em>, <em>abs_tol_t=None</em>, <em>rel_tol_t=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.extract_point_group_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.format_for_phenix_refine">
<code class="descname">format_for_phenix_refine</code><span class="sig-paren">(</span><em>prefix='pdb_interpretation.ncs_group'</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.format_for_phenix_refine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.format_for_resolve">
<code class="descname">format_for_resolve</code><span class="sig-paren">(</span><em>crystal_number=None</em>, <em>skip_identity_if_first=False</em>, <em>ncs_domain_pdb=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.format_for_resolve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.format_group_specification">
<code class="descname">format_group_specification</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.format_group_specification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_forwards_reverse_helix">
<code class="descname">get_forwards_reverse_helix</code><span class="sig-paren">(</span><em>r1=None</em>, <em>t1=None</em>, <em>r2=None</em>, <em>t2=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_forwards_reverse_helix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_helix_parameters">
<code class="descname">get_helix_parameters</code><span class="sig-paren">(</span><em>tol_z=0.01</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_helix_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_helix_theta">
<code class="descname">get_helix_theta</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_helix_theta" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_helix_z_translation">
<code class="descname">get_helix_z_translation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_helix_z_translation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_inverses">
<code class="descname">get_inverses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_inverses" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_new_group">
<code class="descname">get_new_group</code><span class="sig-paren">(</span><em>hierarchy_to_match_order=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_new_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_order_dict">
<code class="descname">get_order_dict</code><span class="sig-paren">(</span><em>hierarchy_to_match_order=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_order_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_theta_along_z">
<code class="descname">get_theta_along_z</code><span class="sig-paren">(</span><em>m0</em>, <em>m1</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_theta_along_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_trans_along_z">
<code class="descname">get_trans_along_z</code><span class="sig-paren">(</span><em>t0</em>, <em>t1</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_trans_along_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.helix_rt_forwards">
<code class="descname">helix_rt_forwards</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.helix_rt_forwards" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.helix_rt_reverse">
<code class="descname">helix_rt_reverse</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.helix_rt_reverse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.identity_op_id">
<code class="descname">identity_op_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.identity_op_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.invert_matrices">
<code class="descname">invert_matrices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.invert_matrices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.is_helical_along_z">
<code class="descname">is_helical_along_z</code><span class="sig-paren">(</span><em>tol_z=0.01</em>, <em>tol_r=0.02</em>, <em>abs_tol_t=2.0</em>, <em>rel_tol_t=0.05</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.is_helical_along_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.is_point_group_symmetry">
<code class="descname">is_point_group_symmetry</code><span class="sig-paren">(</span><em>tol_r=0.02</em>, <em>abs_tol_t=2.0</em>, <em>rel_tol_t=0.05</em>, <em>symmetry_to_match=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.is_point_group_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.map_inside_unit_cell">
<code class="descname">map_inside_unit_cell</code><span class="sig-paren">(</span><em>unit_cell=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.map_inside_unit_cell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.n_ncs_oper">
<code class="descname">n_ncs_oper</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.n_ncs_oper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.ncs_domain_pdb">
<code class="descname">ncs_domain_pdb</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.ncs_domain_pdb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.note">
<code class="descname">note</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.note" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.oper_adds_offset">
<code class="descname">oper_adds_offset</code><span class="sig-paren">(</span><em>i1</em>, <em>tol_r=None</em>, <em>abs_tol_t=None</em>, <em>rel_tol_t=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.oper_adds_offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.print_list">
<code class="descname">print_list</code><span class="sig-paren">(</span><em>list_of_real</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.print_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.residues_in_common_list">
<code class="descname">residues_in_common_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.residues_in_common_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.rmsd_list">
<code class="descname">rmsd_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.rmsd_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.rota_matrices">
<code class="descname">rota_matrices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.rota_matrices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.rota_matrices_inv">
<code class="descname">rota_matrices_inv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.rota_matrices_inv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.rotate_matrices">
<code class="descname">rotate_matrices</code><span class="sig-paren">(</span><em>rot=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.rotate_matrices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.rotations_translations_forward_euler">
<code class="descname">rotations_translations_forward_euler</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.rotations_translations_forward_euler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.round">
<code class="descname">round</code><span class="sig-paren">(</span><em>value</em>, <em>n_digit</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.round" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.sort_by_z_translation">
<code class="descname">sort_by_z_translation</code><span class="sig-paren">(</span><em>tol_z=0.01</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.sort_by_z_translation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.source_of_ncs_info">
<code class="descname">source_of_ncs_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.source_of_ncs_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.translations_orth">
<code class="descname">translations_orth</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.translations_orth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mmtbx.ncs.ncs.ncs_group.translations_orth_inv">
<code class="descname">translations_orth_inv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.translations_orth_inv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.offset_inside_cell">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">offset_inside_cell</code><span class="sig-paren">(</span><em>center</em>, <em>unit_cell</em>, <em>orthogonalize=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.offset_inside_cell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.offset_inside_zero_one">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">offset_inside_zero_one</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.offset_inside_zero_one" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.remove_quotes_from_chain_id">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">remove_quotes_from_chain_id</code><span class="sig-paren">(</span><em>chain_residue_id</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.remove_quotes_from_chain_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs.remove_single_quotes">
<code class="descclassname">mmtbx.ncs.ncs.</code><code class="descname">remove_single_quotes</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.remove_single_quotes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="mmtbx-ncs-restraints-module">
<h2><a class="toc-backref" href="#id5">mmtbx.ncs.restraints module</a><a class="headerlink" href="#mmtbx-ncs-restraints-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mmtbx.ncs.ncs_search">
<span id="mmtbx-ncs-ncs-search-module"></span><h2><a class="toc-backref" href="#id6">mmtbx.ncs.ncs_search module</a><a class="headerlink" href="#module-mmtbx.ncs.ncs_search" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="mmtbx.ncs.ncs_search.Chains_info">
<em class="property">class </em><code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">Chains_info</code><a class="headerlink" href="#mmtbx.ncs.ncs_search.Chains_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Container for hierarchy analysis</p>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.find_ncs_in_hierarchy">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">find_ncs_in_hierarchy</code><span class="sig-paren">(</span><em>ph</em>, <em>chains_info=None</em>, <em>chain_max_rmsd=5.0</em>, <em>log=None</em>, <em>chain_similarity_threshold=0.85</em>, <em>residue_match_radius=4.0</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.find_ncs_in_hierarchy" title="Permalink to this definition">¶</a></dt>
<dd><p>Find NCS relation in hierarchy</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ph</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><em>object</em></a>) – hierarchy</li>
<li><strong>use_minimal_master_ncs</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.bool" title="scitbx.array_family.flex.bool"><em>bool</em></a>) – use maximal or minimal common chains
in master ncs groups</li>
<li><strong>chain_max_rmsd</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – limit of rms difference chains when aligned together</li>
<li><strong>residue_match_radius</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – max allow distance difference between pairs of matching
atoms of two residues</li>
<li><strong>chain_similarity_threshold</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – min similarity between matching chains</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">groups_list - class_ncs_restraints_group_list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.get_bool_selection_to_keep">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">get_bool_selection_to_keep</code><span class="sig-paren">(</span><em>big_selection</em>, <em>small_selection</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_bool_selection_to_keep" title="Permalink to this definition">¶</a></dt>
<dd><p>given 2 iselections (they are sorted), returns bool selection of size
big selection showing what are the matches with small selection.
Rather fast algorithm but may be beneficial to transfer to C++
O(n+m), where n,m - sizes of selections</p>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.get_chain_xyz">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">get_chain_xyz</code><span class="sig-paren">(</span><em>hierarchy</em>, <em>chain_id</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_chain_xyz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.get_chains_info">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">get_chains_info</code><span class="sig-paren">(</span><em>ph</em>, <em>selection_list=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_chains_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect information about chains or segments of the hierarchy according to
selection strings
Exclude water atoms
When there are alternate conformations, we use the first one</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ph</strong> – pdb_hierarchy</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>values are object containing</dt>
<dd>chains (str): chain IDs OR selections string
res_name (list of str): list of residues names
resid (list of str): list of residues sequence number, resid
atom_names (list of list of str): list of atoms in residues
atom_selection (list of list of list of int): the location of atoms in ph
chains_atom_number (list of int): list of number of atoms in each chain</dd>
</dl>
<p>exclude_water (bool): exclude water</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">chains_info (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.get_copy_master_selections_from_match_dict">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">get_copy_master_selections_from_match_dict</code><span class="sig-paren">(</span><em>match_dict</em>, <em>prel_gr_dict</em>, <em>master</em>, <em>ch_copy</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_copy_master_selections_from_match_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.get_info_from_match_dict">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">get_info_from_match_dict</code><span class="sig-paren">(</span><em>match_dict</em>, <em>key</em>, <em>chain</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_info_from_match_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.get_match_rmsd">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">get_match_rmsd</code><span class="sig-paren">(</span><em>ph</em>, <em>match</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_match_rmsd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.get_matching_atoms">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">get_matching_atoms</code><span class="sig-paren">(</span><em>chains_info</em>, <em>a_id</em>, <em>b_id</em>, <em>res_num_a</em>, <em>res_num_b</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_matching_atoms" title="Permalink to this definition">¶</a></dt>
<dd><p>Get selection of matching chains, match residues atoms
We keep only residues with continuous matching atoms</p>
<p>Residues with alternative locations and of different size are excluded</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>chains_info</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><em>object</em></a>) – object containing
chains (str): chain IDs or selections string
res_name (list of str): list of residues names
resid (list of str): list of residues sequence number, resid
atom_names (list of list of str): list of atoms in residues
atom_selection (list of list of list of int): the location of atoms in ph
chains_atom_number (list of int): list of number of atoms in each chain</li>
<li><strong>a_id</strong><strong>,</strong><strong>b_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Chain IDs</li>
<li><strong>res_num_a/b</strong> (<em>list of int</em>) – indices of matching residues position</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">matching atoms selection
res_num_a/b (list of int): updated res_num_a/b
msg (str): message regarding matching residues with different atom number</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">sel_a/b (list of lists)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.get_preliminary_ncs_groups">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">get_preliminary_ncs_groups</code><span class="sig-paren">(</span><em>match_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_preliminary_ncs_groups" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.make_flips_if_necessary_torsion">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">make_flips_if_necessary_torsion</code><span class="sig-paren">(</span><em>const_h</em>, <em>flip_h</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.make_flips_if_necessary_torsion" title="Permalink to this definition">¶</a></dt>
<dd><p>3 times faster than other (removed) procedure.</p>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.mmtbx_res_alignment">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">mmtbx_res_alignment</code><span class="sig-paren">(</span><em>seq_a</em>, <em>seq_b</em>, <em>min_percent=0.85</em>, <em>atomnames=False</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.mmtbx_res_alignment" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.my_get_rot_trans">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">my_get_rot_trans</code><span class="sig-paren">(</span><em>ph</em>, <em>master_selection</em>, <em>copy_selection</em>, <em>master_chain_id</em>, <em>copy_chain_id</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.my_get_rot_trans" title="Permalink to this definition">¶</a></dt>
<dd><p>Get rotation and translation using superpose.</p>
<p>This function is used only when phil parameters are provided. In this case
we require the selection of NCS master and copies to be correct.
Correct means:</p>
<blockquote>
<div><ol class="arabic simple">
<li>residue sequence in master and copies is exactly the same</li>
<li>the number of atoms in master and copies is exactly the same</li>
</ol>
</div></blockquote>
<p>One can get exact selection strings by ncs_object.show(verbose=True)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ph</strong> – hierarchy</li>
<li><strong>master/copy_selection</strong> – master and copy iselections</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.my_selection">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">my_selection</code><span class="sig-paren">(</span><em>ph</em>, <em>ch_id</em>, <em>sel_list_extended</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.my_selection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.ncs_grouping_and_group_dict">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">ncs_grouping_and_group_dict</code><span class="sig-paren">(</span><em>match_dict</em>, <em>hierarchy</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.ncs_grouping_and_group_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>The implementation of simplest way to do NCS grouping. Maximum one chain
in selection.
Do the job of minimal_master_ncs_grouping/minimal_ncs_operators_grouping.</p>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.remove_far_atoms">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">remove_far_atoms</code><span class="sig-paren">(</span><em>list_a</em>, <em>list_b</em>, <em>res_list_a</em>, <em>res_list_b</em>, <em>ref_sites</em>, <em>other_sites</em>, <em>residue_match_radius=4.0</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.remove_far_atoms" title="Permalink to this definition">¶</a></dt>
<dd><p>When comparing lists of matching atoms, remove residues where some atoms are
are locally misaligned, for example when matching residues are
perpendicular to each other rather than being close to parallel.</p>
<p>The criteria used:
For each matching residues, the difference between distance of farthest
matching atoms pair and the distance of closest pair mast be &lt; residue_match_radius</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>list_a</strong> (<em>list_a</em><em>,</em>) – list of residues atoms</li>
<li><strong>res_list_a</strong><strong>,</strong><strong>res_list_b</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of residues in chains</li>
<li><strong>ref_sites</strong><strong>,</strong><strong>other_sites</strong> (<em>flex.vec3</em>) – atoms coordinates</li>
<li><strong>residue_match_radius</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – max allow distance difference</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">sel_a,sel_b,
res_list_a_new,res_list_b_new,
ref_sites_new,other_sites_new</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Updated arguments</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.search_ncs_relations">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">search_ncs_relations</code><span class="sig-paren">(</span><em>ph=None</em>, <em>chains_info=None</em>, <em>chain_similarity_threshold=0.85</em>, <em>chain_max_rmsd=2.0</em>, <em>residue_match_radius=4</em>, <em>log=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.search_ncs_relations" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for NCS relations between chains or parts of chains, in a protein
hierarchy</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ph</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><em>object</em></a>) – hierarchy</li>
<li><strong>chains_info</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – values are object containing
chains (str): chain IDs OR selections string
res_name (list of str): list of residues names
resid (list of str): list of residues sequence number, resid
atom_names (list of list of str): list of atoms in residues
atom_selection (list of list of list of int): the location of atoms in ph
chains_atom_number (list of int): list of number of atoms in each chain</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>message regarding matching residues with different atom number
match_dict(dict): key:(chains_id_a,chains_id_b)</p>
<blockquote>
<div><dl class="docutils">
<dt>val:[selection_a,selection_b,</dt>
<dd><p class="first last">res_list_a,res_list_b,rot,trans,rmsd]</p>
</dd>
</dl>
</div></blockquote>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">msg (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_search.shortcut_1">
<code class="descclassname">mmtbx.ncs.ncs_search.</code><code class="descname">shortcut_1</code><span class="sig-paren">(</span><em>hierarchy</em>, <em>chains_info</em>, <em>chain_similarity_threshold</em>, <em>chain_max_rmsd</em>, <em>log</em>, <em>residue_match_radius</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.shortcut_1" title="Permalink to this definition">¶</a></dt>
<dd><p>Checking the case when whole hierarchy was produced by multiplication of
molecule with BIOMT or MTRIX matrices (or both). In this case we are expecting
to find identical chains with 0 rmsd between them.</p>
</dd></dl>

</div>
<div class="section" id="module-mmtbx.ncs.ncs_utils">
<span id="mmtbx-ncs-ncs-utils-module"></span><h2><a class="toc-backref" href="#id7">mmtbx.ncs.ncs_utils module</a><a class="headerlink" href="#module-mmtbx.ncs.ncs_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="mmtbx.ncs.ncs_utils.apply_transforms">
<code class="descclassname">mmtbx.ncs.ncs_utils.</code><code class="descname">apply_transforms</code><span class="sig-paren">(</span><em>ncs_coordinates</em>, <em>ncs_restraints_group_list</em>, <em>total_asu_length</em>, <em>extended_ncs_selection</em>, <em>round_coordinates=True</em>, <em>center_of_coordinates=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.apply_transforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply transformation to ncs_coordinates,
and round the results if round_coordinates is True</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ncs_coordinates</strong> (<em>flex.vec3</em>) – master ncs coordinates</li>
<li><strong>ncs_restraints_group_list</strong> – list of ncs_restraint_group objects</li>
<li><strong>total_asu_length</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.int" title="scitbx.array_family.flex.int"><em>int</em></a>) – Complete ASU length
extended_ncs_selection (flex.size_t): master ncs and non-ncs related parts</li>
<li><strong>center_of_coordinates</strong> – when not None, contains the center of coordinate of
the master for each ncs copy</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>Asymmetric or biological unit parts that are related via</dt>
<dd><p class="first last">ncs operations</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.vec3_double" title="scitbx.array_family.flex.vec3_double">flex.vec3_double</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_utils.compute_transform_grad">
<code class="descclassname">mmtbx.ncs.ncs_utils.</code><code class="descname">compute_transform_grad</code><span class="sig-paren">(</span><em>grad_wrt_xyz</em>, <em>xyz_asu</em>, <em>x</em>, <em>ncs_restraints_group_list</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.compute_transform_grad" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX
XXX Consider making it method of class_ncs_restraints_group_list
XXX</p>
<p>Compute gradient in respect to the rotation angles and the translation
vectors. R = Rx(the)Ry(psi)Rz(phi)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>grad_wrt_xyz</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="scitbx.array_family.flex.double"><em>flex.double</em></a>) – gradients with respect to xyz.</li>
<li><strong>ncs_restraints_group_list</strong> – list containing ncs_restraint_group objects</li>
<li><strong>transforms_obj</strong> (<em>ncs_group_object</em>) – containing information in rotation
matrices and to which chains they apply</li>
<li><strong>xyz_asu</strong> (<em>flex.vec3</em>) – The coordinates sites cart of the complete ASU</li>
<li><strong>x</strong> (<em>flex double</em>) – The angles, in the form
(theta_1,psi_1,phi_1,tx_1,ty_1,tz_1,..
theta_n,psi_n,phi_n,tx_n/s,ty_n/s,tz_n/s)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the gradient</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">g (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="scitbx.array_family.flex.double">flex.double</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_utils.flip_atoms_in_ncs_groups">
<code class="descclassname">mmtbx.ncs.ncs_utils.</code><code class="descname">flip_atoms_in_ncs_groups</code><span class="sig-paren">(</span><em>hierarchy</em>, <em>ncs_restraints_group_list</em>, <em>mon_lib_srv=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.flip_atoms_in_ncs_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX
XXX not used, only tested. May have some value.
XXX
This function will actually modify hierarchy by making necessary flips
in ncs-related residues. Flip will be made by exchanging atom coordinates.
Will make all copies consistent with master.</p>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_utils.get_list_of_best_ncs_copy_map_correlation">
<code class="descclassname">mmtbx.ncs.ncs_utils.</code><code class="descname">get_list_of_best_ncs_copy_map_correlation</code><span class="sig-paren">(</span><em>ncs_groups</em>, <em>xray_structure=None</em>, <em>fmodel=None</em>, <em>map_data=None</em>, <em>d_min=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.get_list_of_best_ncs_copy_map_correlation" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the copy with best map correlation in each ncs group</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>list of the copy with the best map correlation.</dt>
<dd>(the master copy is 0)</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">best_list (list of int)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_utils.get_refine_selection">
<code class="descclassname">mmtbx.ncs.ncs_utils.</code><code class="descname">get_refine_selection</code><span class="sig-paren">(</span><em>refine_selection=None</em>, <em>number_of_atoms=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.get_refine_selection" title="Permalink to this definition">¶</a></dt>
<dd><p>populate refine_selection with all atoms if no selection is given</p>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_utils.get_weight">
<code class="descclassname">mmtbx.ncs.ncs_utils.</code><code class="descname">get_weight</code><span class="sig-paren">(</span><em>fmodel=None</em>, <em>restraints_manager=None</em>, <em>sites=None</em>, <em>transformations=None</em>, <em>u_iso=None</em>, <em>ncs_restraints_group_list=None</em>, <em>refine_selection=None</em>, <em>minimized_obj=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.get_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates weights for refinements by slightly shaking the minimized
parameters and taking the ratio:
(restraint manager grad norm / parameters gradient norm)</p>
<p>When calling this function during refinement macro cycle, the minimized
object, “minimized_obj” , may contains fmodel, restraints_manager,
refinement type info (sites, transformations, u_iso) and
ncs_restraints_group_list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fmodel</strong> – F-model object</li>
<li><strong>restraints_manager</strong> – Restraints manager object</li>
<li><strong>sites</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.bool" title="scitbx.array_family.flex.bool"><em>bool</em></a>) – Refine by sites</li>
<li><strong>u_iso</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.bool" title="scitbx.array_family.flex.bool"><em>bool</em></a>) – Refine using u_iso</li>
<li><strong>transformations</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.bool" title="scitbx.array_family.flex.bool"><em>bool</em></a>) – Refine using transformations
rotations, translations (matrix objects):</li>
<li><strong>ncs_restraints_group_list</strong> – list of ncs_restraint_group objects</li>
<li><strong>refine_selection</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t"><em>flex.size_t</em></a>) – selection of all ncs related copies and
non ncs related parts to be included in selection (to be refined)</li>
<li><strong>minimized_obj</strong> – Minimization object containing all the other
parameters above</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">weight (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.int" title="scitbx.array_family.flex.int">int</a>)</p>
</td>
</tr>
</tbody>
</table>
<p>Example:
&gt;&gt;&gt;get_weight(minimized_obj=minimized_obj)</p>
<p>or</p>
<dl class="docutils">
<dt>&gt;&gt;&gt;get_weight(fmodel=fmodel,</dt>
<dd>restraints_manager=grm,
sites=sites,
transformations=transformations,
u_iso=u_iso,
ncs_restraints_group_list=ncs_restraints_group_list,
refine_selection=refine_selection)</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_utils.remove_items_from_selection">
<code class="descclassname">mmtbx.ncs.ncs_utils.</code><code class="descname">remove_items_from_selection</code><span class="sig-paren">(</span><em>selection</em>, <em>remove</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.remove_items_from_selection" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a set of atoms from “selection”</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>selection</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t"><em>flex.size_t</em></a>) – atom selection</li>
<li><strong>remove</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t"><em>flex.size_t</em></a>) – atoms to remove from selection</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">modified atom selection</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t">flex.size_t</a>)</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples::</dt>
<dd>&gt;&gt;&gt;a = flex.size_t([1,2,5,6,4])
&gt;&gt;&gt;r = flex.size_t([2,5])
&gt;&gt;&gt;s = remove_items_from_selection(a,r,10)
&gt;&gt;&gt;list(s)
[1,6,4]</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_utils.rotation_to_angles">
<code class="descclassname">mmtbx.ncs.ncs_utils.</code><code class="descname">rotation_to_angles</code><span class="sig-paren">(</span><em>rotation</em>, <em>deg=False</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.rotation_to_angles" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the rotation angles around the axis x,y,z for rotation r
Such that r = Rx*Ry*Rz
Those angles are the Tait-Bryan angles form of Euler angles</p>
<p>Note that typically there are two solutions, and this function will return
only one. In the case that cos(beta) == 0 there are infinite number of
solutions, the function returns the one where gamma = 0</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>r</strong> – (flex.double) of the form (Rxx,Rxy,Rxz,Ryx,Ryy,Ryz,Rzx,Rzy,Rzz)</li>
<li><strong>deg</strong> – When False use radians, when True use degrees</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">(alpha, beta, gamma) rotation angles around the x,y,z</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="mmtbx.validation.html#mmtbx.validation.restraints.angles" title="mmtbx.validation.restraints.angles">angles</a> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="scitbx.array_family.flex.double">flex.double</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_utils.selected_positions">
<code class="descclassname">mmtbx.ncs.ncs_utils.</code><code class="descname">selected_positions</code><span class="sig-paren">(</span><em>selection</em>, <em>positions</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.selected_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns only the selected indices in the positions specified in “positions”
keeping the order</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>selection</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t"><em>flex.size_t</em></a>) – Atoms selection</li>
<li><strong>positions</strong> (<a class="reference internal" href="../cctbx/cctbx.miller.html#cctbx.miller.set" title="cctbx.miller.set"><em>set</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – the allowed positions in the selections</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">(selected atoms, atoms, not selected)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t">flex.size_t</a>, <a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t">flex.size_t</a>)</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Examples::</dt>
<dd>&gt;&gt;&gt;a = flex.size_t([1,2,5,6,4])
&gt;&gt;&gt;pos = {0,3,4}
&gt;&gt;&gt;s,d = selected_positions(a,pos)
&gt;&gt;&gt;list(s)
[1,6,4]
&gt;&gt;&gt;list(d)
[2,5]</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="mmtbx.ncs.ncs_utils.shake_transformations">
<code class="descclassname">mmtbx.ncs.ncs_utils.</code><code class="descname">shake_transformations</code><span class="sig-paren">(</span><em>x</em>, <em>shake_angles_sigma=0.035</em>, <em>shake_translation_sigma=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.shake_transformations" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX
XXX Used here in get_weight().
XXX Not clear what relation MTRIX have to this function at all…
XXX</p>
<p>Shake rotation matrices and translation vectors of a rotation matrices and
translation vectors from the MTRIX records in a PDB file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="scitbx.array_family.flex.double"><em>flex.double</em></a>) – [(alpha_1,beta_1,gamma_1,Tx_1/s,Ty_1/s,Tz_1/s)…]</li>
<li><strong>shake_angles_sigma</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – the sigma (in radians) of the random gaussian
shaking of the rotation angles</li>
<li><strong>shake_translation_sigma</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – the sigma (in angstrom) of the random
gaussian shaking of the translation</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The shaken x</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">new_x (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="scitbx.array_family.flex.double">flex.double</a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-mmtbx.ncs">
<span id="module-contents"></span><h2><a class="toc-backref" href="#id8">Module contents</a><a class="headerlink" href="#module-mmtbx.ncs" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">mmtbx.ncs</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ligands">mmtbx.ncs.ligands module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ncs">mmtbx.ncs.ncs module</a></li>
<li><a class="reference internal" href="#mmtbx-ncs-restraints-module">mmtbx.ncs.restraints module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ncs_search">mmtbx.ncs.ncs_search module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ncs_utils">mmtbx.ncs.ncs_utils module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="mmtbx.monomer_library.html"
                        title="previous chapter">mmtbx.monomer_library package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mmtbx.pdbtools.html"
                        title="next chapter">mmtbx.pdbtools - model manipulation utilities</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/mmtbx/mmtbx.ncs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mmtbx.pdbtools.html" title="mmtbx.pdbtools - model manipulation utilities"
             >next</a> |</li>
        <li class="right" >
          <a href="mmtbx.monomer_library.html" title="mmtbx.monomer_library package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CCTBX Developer documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="mmtbx.html" >mmtbx - macromolecular crystallography</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, University of California.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.2.
    </div>
  </body>
</html>