
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mmtbx.ncs &#8212; CCTBX Developer documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mmtbx.pdbtools - model manipulation utilities" href="mmtbx.pdbtools.html" />
    <link rel="prev" title="mmtbx.monomer_library package" href="mmtbx.monomer_library.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mmtbx.pdbtools.html" title="mmtbx.pdbtools - model manipulation utilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mmtbx.monomer_library.html" title="mmtbx.monomer_library package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CCTBX Developer documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="mmtbx.html" accesskey="U">mmtbx - macromolecular crystallography</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">mmtbx.ncs</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mmtbx-ncs">
<h1><a class="toc-backref" href="#id1">mmtbx.ncs</a><a class="headerlink" href="#mmtbx-ncs" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#mmtbx-ncs" id="id1">mmtbx.ncs</a></p>
<ul>
<li><p><a class="reference internal" href="#submodules" id="id2">Submodules</a></p></li>
<li><p><a class="reference internal" href="#module-mmtbx.ncs.ligands" id="id3">mmtbx.ncs.ligands module</a></p></li>
<li><p><a class="reference internal" href="#module-mmtbx.ncs.ncs" id="id4">mmtbx.ncs.ncs module</a></p></li>
<li><p><a class="reference internal" href="#mmtbx-ncs-restraints-module" id="id5">mmtbx.ncs.restraints module</a></p></li>
<li><p><a class="reference internal" href="#module-mmtbx.ncs.ncs_search" id="id6">mmtbx.ncs.ncs_search module</a></p></li>
<li><p><a class="reference internal" href="#module-mmtbx.ncs.ncs_utils" id="id7">mmtbx.ncs.ncs_utils module</a></p></li>
<li><p><a class="reference internal" href="#module-mmtbx.ncs" id="id8">Module contents</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="submodules">
<h2><a class="toc-backref" href="#id2">Submodules</a><a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mmtbx.ncs.ligands">
<span id="mmtbx-ncs-ligands-module"></span><h2><a class="toc-backref" href="#id3">mmtbx.ncs.ligands module</a><a class="headerlink" href="#module-mmtbx.ncs.ligands" title="Permalink to this headline">¶</a></h2>
<p>Post-fitting cleanup of ligand positions to match NCS operations present in
protein model.  This can be used to recover cases where one copy is placed
successfully but another misses due to interfering protein atoms, weak density,
false positive in empty protein density, etc.  It can also accelerate ligand
placement for large structures if at least one copy is already placed with high
confidence.  Should only be used when the initial placement (e.g. LigandFit CC)
is sufficiently good.</p>
<p>Usually this will be called via the command mmtbx.apply_ncs_to_ligand.</p>
<dl class="py class">
<dt id="mmtbx.ncs.ligands.apply_ligand_ncs">
<em class="property">class </em><code class="sig-prename descclassname">mmtbx.ncs.ligands.</code><code class="sig-name descname">apply_ligand_ncs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pdb_hierarchy</span></em>, <em class="sig-param"><span class="n">fmodel</span></em>, <em class="sig-param"><span class="n">ligand_code</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">atom_selection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">add_new_ligands_to_pdb</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">only_segid</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.apply_ligand_ncs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Wrapper class; this should be the primary entry point for external calling
routines.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdb_hierarchy</strong> – initial model with one or more copies of the target
ligand</p></li>
<li><p><strong>fmodel</strong> – mmtbx.f_model.manager object corresponding to the model</p></li>
<li><p><strong>ligand_code</strong> – three-letter residue name of ligand</p></li>
<li><p><strong>params</strong> – phil scope_extract object for ncs_ligand_phil</p></li>
<li><p><strong>atom_selection</strong> – selection for reference ligand (default: search for
all copies and pick one with the best CC)</p></li>
<li><p><strong>add_new_ligands_to_pdb</strong> – generate combined PDB hierarchy and fmodel
with new ligands incorporated</p></li>
<li><p><strong>only_segid</strong> – </p></li>
<li><p><strong>log</strong> – filehandle-like object</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="mmtbx.ncs.ligands.apply_ligand_ncs.n_ligands">
<em class="property">property </em><code class="sig-name descname">n_ligands</code><a class="headerlink" href="#mmtbx.ncs.ligands.apply_ligand_ncs.n_ligands" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ligands.apply_ligand_ncs.write_maps">
<code class="sig-name descname">write_maps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.apply_ligand_ncs.write_maps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ligands.apply_ligand_ncs.write_pdb">
<code class="sig-name descname">write_pdb</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.apply_ligand_ncs.write_pdb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ligands.combine_ligands_and_hierarchy">
<code class="sig-prename descclassname">mmtbx.ncs.ligands.</code><code class="sig-name descname">combine_ligands_and_hierarchy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pdb_hierarchy</span></em>, <em class="sig-param"><span class="n">ligands</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.combine_ligands_and_hierarchy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ligands.extract_ligand_residues">
<code class="sig-prename descclassname">mmtbx.ncs.ligands.</code><code class="sig-name descname">extract_ligand_residues</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pdb_hierarchy</span></em>, <em class="sig-param"><span class="n">ligand_code</span></em>, <em class="sig-param"><span class="n">atom_selection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">only_segid</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.extract_ligand_residues" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the atom_group object(s) with given 3-character residue name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdb_hierarchy</strong> – input model</p></li>
<li><p><strong>ligand_code</strong> – 3-letter residue ID</p></li>
<li><p><strong>atom_selection</strong> – optional flex.bool object specifying ligand selection
to use</p></li>
<li><p><strong>only_segid</strong> – optional segid which ligand(s) must match</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of atom_group objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="mmtbx.ncs.ligands.get_final_maps_and_cc">
<em class="property">class </em><code class="sig-prename descclassname">mmtbx.ncs.ligands.</code><code class="sig-name descname">get_final_maps_and_cc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fmodel</span></em>, <em class="sig-param"><span class="n">ligands</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">log</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.get_final_maps_and_cc" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="mmtbx.ncs.ligands.get_final_maps_and_cc.write_maps">
<code class="sig-name descname">write_maps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.get_final_maps_and_cc.write_maps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mmtbx.ncs.ligands.group_operators">
<em class="property">class </em><code class="sig-prename descclassname">mmtbx.ncs.ligands.</code><code class="sig-name descname">group_operators</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">selection</span></em>, <em class="sig-param"><span class="n">sele_str</span></em>, <em class="sig-param"><span class="n">sites_cart</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.group_operators" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Object for storing information about NCS relationships relative to an
atom selection, i.e. given four identical chains A, B, C, and D, this might
store information about chain B and the NCS operators for approximate
superpositioning on chains A, C, and D.</p>
<dl class="py method">
<dt id="mmtbx.ncs.ligands.group_operators.add_operator">
<code class="sig-name descname">add_operator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ops</span></em>, <em class="sig-param"><span class="n">sele_str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.group_operators.add_operator" title="Permalink to this definition">¶</a></dt>
<dd><p>Save an NCS operator and corresponding atom selection.</p>
</dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ligands.group_operators.distance_from_center">
<code class="sig-name descname">distance_from_center</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sites</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.group_operators.distance_from_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the distance between centers-of-mass of this selection and the
given sites.  Used to determine ligand-protein chain relationships.</p>
</dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ligands.group_operators.show_summary">
<code class="sig-name descname">show_summary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.group_operators.show_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Print out selections and NCS operators.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ligands.remove_clashing_atoms">
<code class="sig-prename descclassname">mmtbx.ncs.ligands.</code><code class="sig-name descname">remove_clashing_atoms</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xray_structure</span></em>, <em class="sig-param"><span class="n">pdb_hierarchy</span></em>, <em class="sig-param"><span class="n">ligands</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">log</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.remove_clashing_atoms" title="Permalink to this definition">¶</a></dt>
<dd><p>Since the transformed ligands will very frequently overlap with existing
atoms, these need to be deleted if we are confident about the new positions.</p>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ligands.resid_str">
<code class="sig-prename descclassname">mmtbx.ncs.ligands.</code><code class="sig-name descname">resid_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">atom</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.resid_str" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="mmtbx.ncs.ligands.sample_operators">
<em class="property">class </em><code class="sig-prename descclassname">mmtbx.ncs.ligands.</code><code class="sig-name descname">sample_operators</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pdb_hierarchy</span></em>, <em class="sig-param"><span class="n">fmodel</span></em>, <em class="sig-param"><span class="n">ncs_operators</span></em>, <em class="sig-param"><span class="n">ligands</span></em>, <em class="sig-param"><span class="n">params</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.sample_operators" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Determines an appropriate “reference” ligand, and samples the density around
sites transformed by each operator, applying the best operator to the
other ligand copies if meeting cutoff criteria.</p>
<dl class="py method">
<dt id="mmtbx.ncs.ligands.sample_operators.get_new_fcalc_map">
<code class="sig-name descname">get_new_fcalc_map</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sites_new</span></em>, <em class="sig-param"><span class="n">i_seqs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.sample_operators.get_new_fcalc_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ligands.sample_operators.get_sites_cc">
<code class="sig-name descname">get_sites_cc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">atoms</span></em>, <em class="sig-param"><span class="n">sites</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.sample_operators.get_sites_cc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ligands.sample_operators.setup_maps">
<code class="sig-name descname">setup_maps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.sample_operators.setup_maps" title="Permalink to this definition">¶</a></dt>
<dd><p>Create 2mFo-DFc, mFo-DFc, and Fc maps.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ligands.xyz_distance">
<code class="sig-prename descclassname">mmtbx.ncs.ligands.</code><code class="sig-name descname">xyz_distance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xyz1</span></em>, <em class="sig-param"><span class="n">xyz2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ligands.xyz_distance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mmtbx.ncs.ncs">
<span id="mmtbx-ncs-ncs-module"></span><h2><a class="toc-backref" href="#id4">mmtbx.ncs.ncs module</a><a class="headerlink" href="#module-mmtbx.ncs.ncs" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mmtbx.ncs.ncs.abs">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">abs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">aa</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.abs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.crystal_symmetry_to_ncs">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">crystal_symmetry_to_ncs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">crystal_symmetry</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.crystal_symmetry_to_ncs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.euler_frac_to_rot_trans">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">euler_frac_to_rot_trans</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">euler_values</span></em>, <em class="sig-param"><span class="n">frac</span></em>, <em class="sig-param"><span class="n">unit_cell</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.euler_frac_to_rot_trans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.generate_ncs_ops">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">generate_ncs_ops</code><span class="sig-paren">(</span><em class="sig-param">symmetry=None</em>, <em class="sig-param">must_be_consistent_with_space_group_number=None</em>, <em class="sig-param">helical_rot_deg=None</em>, <em class="sig-param">helical_trans_z_angstrom=None</em>, <em class="sig-param">op_max=None</em>, <em class="sig-param">two_fold_along_x=None</em>, <em class="sig-param">include_helical_symmetry=None</em>, <em class="sig-param">max_helical_ops_to_check=None</em>, <em class="sig-param">require_helical_or_point_group_symmetry=None</em>, <em class="sig-param">out=&lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='utf-8'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.generate_ncs_ops" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.get_c_symmetry">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">get_c_symmetry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">is_d</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">two_fold_along_x</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ncs_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_c_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.get_d_symmetry">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">get_d_symmetry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">two_fold_along_x</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ncs_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_d_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.get_helical_symmetry">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">get_helical_symmetry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">helical_rot_deg</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">helical_trans_z_angstrom</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_ops</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_helical_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.get_ncs_from_text">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">get_ncs_from_text</code><span class="sig-paren">(</span><em class="sig-param">text=None</em>, <em class="sig-param">text_is_ncs_spec=None</em>, <em class="sig-param">rotate_about_z=None</em>, <em class="sig-param">rotate_about_y=None</em>, <em class="sig-param">rotate_about_new_y=None</em>, <em class="sig-param">ncs_name=None</em>, <em class="sig-param">out=&lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='utf-8'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_ncs_from_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.get_rot_y">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">get_rot_y</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rot_deg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_rot_y" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.get_rot_z">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">get_rot_z</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rot_deg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.get_rot_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.is_identity">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">is_identity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">r</span></em>, <em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">0.01</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.is_identity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.is_in_range">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">is_in_range</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">z</span></em>, <em class="sig-param"><span class="n">z_min</span></em>, <em class="sig-param"><span class="n">z_max</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.is_in_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.is_same_transform">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">is_same_transform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">r1</span></em>, <em class="sig-param"><span class="n">t1</span></em>, <em class="sig-param"><span class="n">r2</span></em>, <em class="sig-param"><span class="n">t2</span></em>, <em class="sig-param"><span class="n">tol_r</span><span class="o">=</span><span class="default_value">0.02</span></em>, <em class="sig-param"><span class="n">abs_tol_t</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">rel_tol_t</span><span class="o">=</span><span class="default_value">0.05</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.is_same_transform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="mmtbx.ncs.ncs.ncs">
<em class="property">class </em><code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">ncs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exclude_h</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">exclude_d</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.add_cc_list">
<code class="sig-name descname">add_cc_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cc_list</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.add_cc_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.add_identity_op">
<code class="sig-name descname">add_identity_op</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.add_identity_op" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.add_source_info">
<code class="sig-name descname">add_source_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.add_source_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.adjust_magnification">
<code class="sig-name descname">adjust_magnification</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">magnification</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.adjust_magnification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.apply_ncs_to_sites">
<code class="sig-name descname">apply_ncs_to_sites</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sites_cart</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ncs_obj</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">exclude_identity</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ncs_id</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.apply_ncs_to_sites" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.as_ncs_spec_string">
<code class="sig-name descname">as_ncs_spec_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.as_ncs_spec_string" title="Permalink to this definition">¶</a></dt>
<dd><p>shifts to original location and returns text string</p>
</dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.change_of_basis">
<code class="sig-name descname">change_of_basis</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">change_of_basis_operator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit_cell</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">new_unit_cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.change_of_basis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.coordinate_offset">
<code class="sig-name descname">coordinate_offset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coordinate_offset</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit_cell</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">new_unit_cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.coordinate_offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.deep_copy">
<code class="sig-name descname">deep_copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">change_of_basis_operator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit_cell</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">coordinate_offset</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">scale_factor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">new_unit_cell</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ops_to_keep</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extract_point_group_symmetry</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">hierarchy_to_match_order</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.deep_copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.display_all">
<code class="sig-name descname">display_all</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.display_all" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.extend_helix_operators">
<code class="sig-name descname">extend_helix_operators</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">z_range</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tol_z</span><span class="o">=</span><span class="default_value">0.01</span></em>, <em class="sig-param"><span class="n">max_operators</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.extend_helix_operators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.format_all_for_biomt">
<code class="sig-name descname">format_all_for_biomt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_all_for_biomt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.format_all_for_group_specification">
<code class="sig-name descname">format_all_for_group_specification</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">file_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_all_for_group_specification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.format_all_for_phenix_refine">
<code class="sig-name descname">format_all_for_phenix_refine</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">'refinement.pdb_interpretation.ncs_group'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_all_for_phenix_refine" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is an older version of creating phil for phenix refine,
it is modified to replicate a new phil parameters that can handle
selection to the level of atoms, “format_phil_for_phenix_refine”.</p>
<p>When it will still can be used in the older form, which allows only
residue level selection.</p>
</dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.format_all_for_resolve">
<code class="sig-name descname">format_all_for_resolve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">crystal_number</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">skip_identity_if_first</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ncs_domain_pdb</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_all_for_resolve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.format_phil_for_ncs">
<code class="sig-name descname">format_phil_for_ncs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_phil_for_ncs" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes NCS phil selection in NCS format</p>
</dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.format_phil_for_phenix_refine">
<code class="sig-name descname">format_phil_for_phenix_refine</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.format_phil_for_phenix_refine" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes NCS phil selection in phenix_refine format</p>
</dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.get_1_char_after_key">
<code class="sig-name descname">get_1_char_after_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_1_char_after_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.get_1_value_after_key">
<code class="sig-name descname">get_1_value_after_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_1_value_after_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.get_3_values_after_key">
<code class="sig-name descname">get_3_values_after_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_3_values_after_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.get_helix_parameters">
<code class="sig-name descname">get_helix_parameters</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">z_range</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tol_z</span><span class="o">=</span><span class="default_value">0.01</span></em>, <em class="sig-param"><span class="n">max_operators</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_helix_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.get_ncs_name">
<code class="sig-name descname">get_ncs_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_ncs_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.get_res_range_after_key">
<code class="sig-name descname">get_res_range_after_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">line</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.get_res_range_after_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.identity_op_id_in_first_group">
<code class="sig-name descname">identity_op_id_in_first_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.identity_op_id_in_first_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.import_ncs_group">
<code class="sig-name descname">import_ncs_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncs_rota_matr</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">center_orth</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">trans_orth</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">chain_residue_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">residues_in_common_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rmsd_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ncs_domain_pdb</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cc</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">source_of_ncs_info</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ncs_group_object</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.import_ncs_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.init_ncs_group">
<code class="sig-name descname">init_ncs_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.init_ncs_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.init_oper">
<code class="sig-name descname">init_oper</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.init_oper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.invert_matrices">
<code class="sig-name descname">invert_matrices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.invert_matrices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.is_helical_along_z">
<code class="sig-name descname">is_helical_along_z</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tol_r</span><span class="o">=</span><span class="default_value">0.02</span></em>, <em class="sig-param"><span class="n">abs_tol_t</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">rel_tol_t</span><span class="o">=</span><span class="default_value">0.05</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.is_helical_along_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.is_point_group_symmetry">
<code class="sig-name descname">is_point_group_symmetry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tol_r</span><span class="o">=</span><span class="default_value">0.02</span></em>, <em class="sig-param"><span class="n">abs_tol_t</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">rel_tol_t</span><span class="o">=</span><span class="default_value">0.05</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.is_point_group_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.is_similar_ncs_object">
<code class="sig-name descname">is_similar_ncs_object</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">tol_r</span><span class="o">=</span><span class="default_value">0.02</span></em>, <em class="sig-param"><span class="n">abs_tol_t</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">rel_tol_t</span><span class="o">=</span><span class="default_value">0.05</span></em>, <em class="sig-param"><span class="n">allow_self_contained_in_other</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.is_similar_ncs_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if self and other are similar ncs objects
ncs groups do not have to be in same order</p>
</dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.magnification">
<code class="sig-name descname">magnification</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scale_factor</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.magnification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.map_inside_unit_cell">
<code class="sig-name descname">map_inside_unit_cell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.map_inside_unit_cell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.max_operators">
<code class="sig-name descname">max_operators</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.max_operators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.ncs_from_import">
<code class="sig-name descname">ncs_from_import</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rot_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">trans_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">invert_matrices</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.ncs_from_import" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.ncs_from_pdb_input_BIOMT">
<code class="sig-name descname">ncs_from_pdb_input_BIOMT</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pdb_inp</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">invert_matrices</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.ncs_from_pdb_input_BIOMT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.ncs_groups">
<code class="sig-name descname">ncs_groups</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.ncs_groups" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.ncs_oper_in_first_group">
<code class="sig-name descname">ncs_oper_in_first_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.ncs_oper_in_first_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.ncs_read">
<code class="sig-name descname">ncs_read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.ncs_read" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.overall_cc">
<code class="sig-name descname">overall_cc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.overall_cc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.overall_note">
<code class="sig-name descname">overall_note</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.overall_note" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.overall_rmsd">
<code class="sig-name descname">overall_rmsd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.overall_rmsd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.read_ncs">
<code class="sig-name descname">read_ncs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lines</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">source_info</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.read_ncs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.rotate_about_y">
<code class="sig-name descname">rotate_about_y</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rot_deg</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">invert_matrices</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.rotate_about_y" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.rotate_about_z">
<code class="sig-name descname">rotate_about_z</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rot_deg</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">invert_matrices</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.rotate_about_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.rotate_matrices">
<code class="sig-name descname">rotate_matrices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rot</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.rotate_matrices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.save_existing_group_info">
<code class="sig-name descname">save_existing_group_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.save_existing_group_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.save_ncs_group">
<code class="sig-name descname">save_ncs_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.save_ncs_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.save_oper">
<code class="sig-name descname">save_oper</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.save_oper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.select_first_ncs_group">
<code class="sig-name descname">select_first_ncs_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.select_first_ncs_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.select_first_ncs_operator">
<code class="sig-name descname">select_first_ncs_operator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.select_first_ncs_operator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.set_ncs_name">
<code class="sig-name descname">set_ncs_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncs_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.set_ncs_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.set_shift_cart">
<code class="sig-name descname">set_shift_cart</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shift_cart</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.set_shift_cart" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.set_unit_ncs">
<code class="sig-name descname">set_unit_ncs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.set_unit_ncs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.shift_back_cart">
<code class="sig-name descname">shift_back_cart</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.shift_back_cart" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.shift_cart">
<code class="sig-name descname">shift_cart</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.shift_cart" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs.sort_by_z_translation">
<code class="sig-name descname">sort_by_z_translation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tol_z</span><span class="o">=</span><span class="default_value">0.01</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs.sort_by_z_translation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mmtbx.ncs.ncs.ncs_group">
<em class="property">class </em><code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">ncs_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncs_rota_matr</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">center_orth</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">trans_orth</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">chain_residue_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">source_of_ncs_info</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rmsd_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ncs_domain_pdb</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">residues_in_common_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cc</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">note</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">exclude_h</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">exclude_d</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_cc">
<code class="sig-name descname">add_cc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_cc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_chain_residue_id">
<code class="sig-name descname">add_chain_residue_id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">chain_residue_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_chain_residue_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_identity_op">
<code class="sig-name descname">add_identity_op</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_identity_op" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_note">
<code class="sig-name descname">add_note</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">note</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_note" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_residues_in_common_list">
<code class="sig-name descname">add_residues_in_common_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">residues_in_common_list</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_residues_in_common_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.add_rmsd_list">
<code class="sig-name descname">add_rmsd_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rmsd_list</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.add_rmsd_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.adjust_magnification">
<code class="sig-name descname">adjust_magnification</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">magnification</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.adjust_magnification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.apply_cob_to_vector">
<code class="sig-name descname">apply_cob_to_vector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">vector</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">change_of_basis_operator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">coordinate_offset</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit_cell</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">new_unit_cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.apply_cob_to_vector" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.cc">
<code class="sig-name descname">cc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.cc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.centers">
<code class="sig-name descname">centers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.centers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.chain_residue_id">
<code class="sig-name descname">chain_residue_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.chain_residue_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.copy_rot_trans">
<code class="sig-name descname">copy_rot_trans</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_of_matrices</span></em>, <em class="sig-param"><span class="n">list_of_translations</span></em>, <em class="sig-param"><span class="n">change_of_basis_operator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">coordinate_offset</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">scale_factor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit_cell</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">new_unit_cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.copy_rot_trans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.copy_vector_list">
<code class="sig-name descname">copy_vector_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_of_vectors</span></em>, <em class="sig-param"><span class="n">change_of_basis_operator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">coordinate_offset</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">scale_factor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit_cell</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">new_unit_cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.copy_vector_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.deep_copy">
<code class="sig-name descname">deep_copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">change_of_basis_operator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit_cell</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">coordinate_offset</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">new_unit_cell</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">scale_factor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extract_point_group_symmetry</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ops_to_keep</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">hierarchy_to_match_order</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.deep_copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.deep_copy_ops_to_keep">
<code class="sig-name descname">deep_copy_ops_to_keep</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ops_to_keep</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.deep_copy_ops_to_keep" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.deep_copy_order">
<code class="sig-name descname">deep_copy_order</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hierarchy_to_match_order</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.deep_copy_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.delete_inv">
<code class="sig-name descname">delete_inv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.delete_inv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.display_summary">
<code class="sig-name descname">display_summary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.display_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.extend_helix_operators">
<code class="sig-name descname">extend_helix_operators</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">z_range</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tol_z</span><span class="o">=</span><span class="default_value">0.01</span></em>, <em class="sig-param"><span class="n">max_operators</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.extend_helix_operators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.extract_point_group_symmetry">
<code class="sig-name descname">extract_point_group_symmetry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tol_r</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">abs_tol_t</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rel_tol_t</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.extract_point_group_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.format_for_biomt">
<code class="sig-name descname">format_for_biomt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">crystal_number</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">skip_identity_if_first</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ncs_domain_pdb</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.format_for_biomt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.format_for_phenix_refine">
<code class="sig-name descname">format_for_phenix_refine</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">'pdb_interpretation.ncs_group'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.format_for_phenix_refine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.format_for_resolve">
<code class="sig-name descname">format_for_resolve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">crystal_number</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">skip_identity_if_first</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ncs_domain_pdb</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.format_for_resolve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.format_group_specification">
<code class="sig-name descname">format_group_specification</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.format_group_specification" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_forwards_reverse_helix">
<code class="sig-name descname">get_forwards_reverse_helix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">r1</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t1</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">r2</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_forwards_reverse_helix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_helix_parameters">
<code class="sig-name descname">get_helix_parameters</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tol_z</span><span class="o">=</span><span class="default_value">0.01</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_helix_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_helix_theta">
<code class="sig-name descname">get_helix_theta</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_helix_theta" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_helix_z_translation">
<code class="sig-name descname">get_helix_z_translation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_helix_z_translation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_inverses">
<code class="sig-name descname">get_inverses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_inverses" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_new_group">
<code class="sig-name descname">get_new_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hierarchy_to_match_order</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_new_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_order_dict">
<code class="sig-name descname">get_order_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hierarchy_to_match_order</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_order_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_theta_along_z">
<code class="sig-name descname">get_theta_along_z</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m0</span></em>, <em class="sig-param"><span class="n">m1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_theta_along_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.get_trans_along_z">
<code class="sig-name descname">get_trans_along_z</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t0</span></em>, <em class="sig-param"><span class="n">t1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.get_trans_along_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.helix_rt_forwards">
<code class="sig-name descname">helix_rt_forwards</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.helix_rt_forwards" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.helix_rt_reverse">
<code class="sig-name descname">helix_rt_reverse</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.helix_rt_reverse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.identity_op_id">
<code class="sig-name descname">identity_op_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.identity_op_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.invert_matrices">
<code class="sig-name descname">invert_matrices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.invert_matrices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.is_helical_along_z">
<code class="sig-name descname">is_helical_along_z</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tol_z</span><span class="o">=</span><span class="default_value">0.01</span></em>, <em class="sig-param"><span class="n">tol_r</span><span class="o">=</span><span class="default_value">0.02</span></em>, <em class="sig-param"><span class="n">abs_tol_t</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">rel_tol_t</span><span class="o">=</span><span class="default_value">0.05</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.is_helical_along_z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.is_point_group_symmetry">
<code class="sig-name descname">is_point_group_symmetry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tol_r</span><span class="o">=</span><span class="default_value">0.02</span></em>, <em class="sig-param"><span class="n">abs_tol_t</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">rel_tol_t</span><span class="o">=</span><span class="default_value">0.05</span></em>, <em class="sig-param"><span class="n">symmetry_to_match</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.is_point_group_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.is_similar_ncs_group">
<code class="sig-name descname">is_similar_ncs_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">tol_r</span><span class="o">=</span><span class="default_value">0.02</span></em>, <em class="sig-param"><span class="n">abs_tol_t</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">rel_tol_t</span><span class="o">=</span><span class="default_value">0.05</span></em>, <em class="sig-param"><span class="n">allow_self_contained_in_other</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.is_similar_ncs_group" title="Permalink to this definition">¶</a></dt>
<dd><p>return True if all operations of self match one of other</p>
</dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.map_inside_unit_cell">
<code class="sig-name descname">map_inside_unit_cell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_cell</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.map_inside_unit_cell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.n_ncs_oper">
<code class="sig-name descname">n_ncs_oper</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.n_ncs_oper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.ncs_domain_pdb">
<code class="sig-name descname">ncs_domain_pdb</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.ncs_domain_pdb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.note">
<code class="sig-name descname">note</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.note" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.oper_adds_offset">
<code class="sig-name descname">oper_adds_offset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i1</span></em>, <em class="sig-param"><span class="n">tol_r</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">abs_tol_t</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rel_tol_t</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.oper_adds_offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.print_list">
<code class="sig-name descname">print_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_of_real</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.print_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.residues_in_common_list">
<code class="sig-name descname">residues_in_common_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.residues_in_common_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.rmsd_list">
<code class="sig-name descname">rmsd_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.rmsd_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.rota_matrices">
<code class="sig-name descname">rota_matrices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.rota_matrices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.rota_matrices_inv">
<code class="sig-name descname">rota_matrices_inv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.rota_matrices_inv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.rotate_matrices">
<code class="sig-name descname">rotate_matrices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rot</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.rotate_matrices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.rotations_translations_forward_euler">
<code class="sig-name descname">rotations_translations_forward_euler</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.rotations_translations_forward_euler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.round">
<code class="sig-name descname">round</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">n_digit</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.round" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.sort_by_z_translation">
<code class="sig-name descname">sort_by_z_translation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tol_z</span><span class="o">=</span><span class="default_value">0.01</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.sort_by_z_translation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.source_of_ncs_info">
<code class="sig-name descname">source_of_ncs_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.source_of_ncs_info" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.translations_orth">
<code class="sig-name descname">translations_orth</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.translations_orth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mmtbx.ncs.ncs.ncs_group.translations_orth_inv">
<code class="sig-name descname">translations_orth_inv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.ncs_group.translations_orth_inv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.offset_inside_cell">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">offset_inside_cell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">center</span></em>, <em class="sig-param"><span class="n">unit_cell</span></em>, <em class="sig-param"><span class="n">orthogonalize</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.offset_inside_cell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.offset_inside_zero_one">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">offset_inside_zero_one</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.offset_inside_zero_one" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.remove_extra">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">remove_extra</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.remove_extra" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.remove_ncs_not_consistent_with_space_group_number">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">remove_ncs_not_consistent_with_space_group_number</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sg_number</span></em>, <em class="sig-param"><span class="n">ncs_list</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.remove_ncs_not_consistent_with_space_group_number" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>remove ncs ojbect that are not consistent with space_group number</dt><dd><p>sg_number</p>
</dd>
</dl>
<p>NOTE: allows ncs that has higher symmetry than sg_number</p>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.remove_quotes_from_chain_id">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">remove_quotes_from_chain_id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">chain_residue_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.remove_quotes_from_chain_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.remove_single_quotes">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">remove_single_quotes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.remove_single_quotes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs.value">
<code class="sig-prename descclassname">mmtbx.ncs.ncs.</code><code class="sig-name descname">value</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="mmtbx-ncs-restraints-module">
<h2><a class="toc-backref" href="#id5">mmtbx.ncs.restraints module</a><a class="headerlink" href="#mmtbx-ncs-restraints-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mmtbx.ncs.ncs_search">
<span id="mmtbx-ncs-ncs-search-module"></span><h2><a class="toc-backref" href="#id6">mmtbx.ncs.ncs_search module</a><a class="headerlink" href="#module-mmtbx.ncs.ncs_search" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="mmtbx.ncs.ncs_search.Chains_info">
<em class="property">class </em><code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">Chains_info</code><a class="headerlink" href="#mmtbx.ncs.ncs_search.Chains_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Container for hierarchy analysis</p>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.find_ncs_in_hierarchy">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">find_ncs_in_hierarchy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ph</span></em>, <em class="sig-param"><span class="n">chains_info</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">chain_max_rmsd</span><span class="o">=</span><span class="default_value">5.0</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">chain_similarity_threshold</span><span class="o">=</span><span class="default_value">0.85</span></em>, <em class="sig-param"><span class="n">residue_match_radius</span><span class="o">=</span><span class="default_value">4.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.find_ncs_in_hierarchy" title="Permalink to this definition">¶</a></dt>
<dd><p>Find NCS relation in hierarchy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ph</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><em>object</em></a>) – hierarchy</p></li>
<li><p><strong>use_minimal_master_ncs</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.bool" title="scitbx.array_family.flex.bool"><em>bool</em></a>) – use maximal or minimal common chains
in master ncs groups</p></li>
<li><p><strong>chain_max_rmsd</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – limit of rms difference chains when aligned together</p></li>
<li><p><strong>residue_match_radius</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – max allow distance difference between pairs of matching
atoms of two residues</p></li>
<li><p><strong>chain_similarity_threshold</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – min similarity between matching chains</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>groups_list - class_ncs_restraints_group_list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.get_bool_selection_to_keep">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">get_bool_selection_to_keep</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">big_selection</span></em>, <em class="sig-param"><span class="n">small_selection</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_bool_selection_to_keep" title="Permalink to this definition">¶</a></dt>
<dd><p>given 2 iselections (they are sorted), returns bool selection of size
big selection showing what are the matches with small selection.
Rather fast algorithm but may be beneficial to transfer to C++
O(n+m), where n,m - sizes of selections</p>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.get_chain_xyz">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">get_chain_xyz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hierarchy</span></em>, <em class="sig-param"><span class="n">chain_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_chain_xyz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.get_chains_info">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">get_chains_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ph</span></em>, <em class="sig-param"><span class="n">selection_list</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_chains_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect information about chains or segments of the hierarchy according to
selection strings
Exclude water atoms
When there are alternate conformations, we use the first one</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ph</strong> – pdb_hierarchy</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>values are object containing</dt><dd><p>chains (str): chain IDs OR selections string
res_name (list of str): list of residues names
resid (list of str): list of residues sequence number, resid
atom_names (list of list of str): list of atoms in residues
atom_selection (list of list of list of int): the location of atoms in ph
chains_atom_number (list of int): list of number of atoms in each chain</p>
</dd>
</dl>
<p>exclude_water (bool): exclude water</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>chains_info (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.get_copy_master_selections_from_match_dict">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">get_copy_master_selections_from_match_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">match_dict</span></em>, <em class="sig-param"><span class="n">prel_gr_dict</span></em>, <em class="sig-param"><span class="n">master</span></em>, <em class="sig-param"><span class="n">ch_copy</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_copy_master_selections_from_match_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.get_info_from_match_dict">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">get_info_from_match_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">match_dict</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">chain</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_info_from_match_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.get_match_rmsd">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">get_match_rmsd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ph</span></em>, <em class="sig-param"><span class="n">match</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_match_rmsd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.get_matching_atoms">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">get_matching_atoms</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">chains_info</span></em>, <em class="sig-param"><span class="n">a_id</span></em>, <em class="sig-param"><span class="n">b_id</span></em>, <em class="sig-param"><span class="n">res_num_a</span></em>, <em class="sig-param"><span class="n">res_num_b</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_matching_atoms" title="Permalink to this definition">¶</a></dt>
<dd><p>Get selection of matching chains, match residues atoms
We keep only residues with continuous matching atoms</p>
<p>Residues with alternative locations and of different size are excluded</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>chains_info</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><em>object</em></a>) – object containing
chains (str): chain IDs or selections string
res_name (list of str): list of residues names
resid (list of str): list of residues sequence number, resid
atom_names (list of list of str): list of atoms in residues
atom_selection (list of list of list of int): the location of atoms in ph
chains_atom_number (list of int): list of number of atoms in each chain</p></li>
<li><p><strong>a_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Chain IDs</p></li>
<li><p><strong>b_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Chain IDs</p></li>
<li><p><strong>res_num_a/b</strong> (<em>list of int</em>) – indices of matching residues position</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>matching atoms selection
res_num_a/b (list of int): updated res_num_a/b
msg (str): message regarding matching residues with different atom number</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sel_a/b (list of lists)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.get_preliminary_ncs_groups">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">get_preliminary_ncs_groups</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">match_dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.get_preliminary_ncs_groups" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.make_flips_if_necessary_torsion">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">make_flips_if_necessary_torsion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">const_h</span></em>, <em class="sig-param"><span class="n">flip_h</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.make_flips_if_necessary_torsion" title="Permalink to this definition">¶</a></dt>
<dd><p>3 times faster than other (removed) procedure.</p>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.mmtbx_res_alignment">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">mmtbx_res_alignment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seq_a</span></em>, <em class="sig-param"><span class="n">seq_b</span></em>, <em class="sig-param"><span class="n">min_percent</span><span class="o">=</span><span class="default_value">0.85</span></em>, <em class="sig-param"><span class="n">atomnames</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.mmtbx_res_alignment" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.my_get_rot_trans">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">my_get_rot_trans</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ph</span></em>, <em class="sig-param"><span class="n">master_selection</span></em>, <em class="sig-param"><span class="n">copy_selection</span></em>, <em class="sig-param"><span class="n">master_chain_id</span></em>, <em class="sig-param"><span class="n">copy_chain_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.my_get_rot_trans" title="Permalink to this definition">¶</a></dt>
<dd><p>Get rotation and translation using superpose.</p>
<p>This function is used only when phil parameters are provided. In this case
we require the selection of NCS master and copies to be correct.
Correct means:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>residue sequence in master and copies is exactly the same</p></li>
<li><p>the number of atoms in master and copies is exactly the same</p></li>
</ol>
</div></blockquote>
<p>One can get exact selection strings by ncs_object.show(verbose=True)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ph</strong> – hierarchy</p></li>
<li><p><strong>master/copy_selection</strong> – master and copy iselections</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.my_selection">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">my_selection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ph</span></em>, <em class="sig-param"><span class="n">ch_id</span></em>, <em class="sig-param"><span class="n">sel_list_extended</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.my_selection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.ncs_grouping_and_group_dict">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">ncs_grouping_and_group_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">match_dict</span></em>, <em class="sig-param"><span class="n">hierarchy</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.ncs_grouping_and_group_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>The implementation of simplest way to do NCS grouping. Maximum one chain
in selection.
Do the job of minimal_master_ncs_grouping/minimal_ncs_operators_grouping.</p>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.remove_far_atoms">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">remove_far_atoms</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_a</span></em>, <em class="sig-param"><span class="n">list_b</span></em>, <em class="sig-param"><span class="n">res_list_a</span></em>, <em class="sig-param"><span class="n">res_list_b</span></em>, <em class="sig-param"><span class="n">ref_sites</span></em>, <em class="sig-param"><span class="n">other_sites</span></em>, <em class="sig-param"><span class="n">residue_match_radius</span><span class="o">=</span><span class="default_value">4.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.remove_far_atoms" title="Permalink to this definition">¶</a></dt>
<dd><p>When comparing lists of matching atoms, remove residues where some atoms are
are locally misaligned, for example when matching residues are
perpendicular to each other rather than being close to parallel.</p>
<p>The criteria used:
For each matching residues, the difference between distance of farthest
matching atoms pair and the distance of closest pair mast be &lt; residue_match_radius</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_a</strong> (<em>list of list</em>) – list of residues atoms</p></li>
<li><p><strong>list_a</strong> – list of residues atoms</p></li>
<li><p><strong>res_list_a</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a>) – list of residues in chains</p></li>
<li><p><strong>res_list_b</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a>) – list of residues in chains</p></li>
<li><p><strong>ref_sites</strong> (<em>flex.vec3</em>) – atoms coordinates</p></li>
<li><p><strong>other_sites</strong> (<em>flex.vec3</em>) – atoms coordinates</p></li>
<li><p><strong>residue_match_radius</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – max allow distance difference</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>sel_a,sel_b,
res_list_a_new,res_list_b_new,
ref_sites_new,other_sites_new</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Updated arguments</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.search_ncs_relations">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">search_ncs_relations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ph</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">chains_info</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">chain_similarity_threshold</span><span class="o">=</span><span class="default_value">0.85</span></em>, <em class="sig-param"><span class="n">chain_max_rmsd</span><span class="o">=</span><span class="default_value">2.0</span></em>, <em class="sig-param"><span class="n">residue_match_radius</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">log</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.search_ncs_relations" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for NCS relations between chains or parts of chains, in a protein
hierarchy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ph</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><em>object</em></a>) – hierarchy</p></li>
<li><p><strong>chains_info</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – values are object containing
chains (str): chain IDs OR selections string
res_name (list of str): list of residues names
resid (list of str): list of residues sequence number, resid
atom_names (list of list of str): list of atoms in residues
atom_selection (list of list of list of int): the location of atoms in ph
chains_atom_number (list of int): list of number of atoms in each chain</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>message regarding matching residues with different atom number
match_dict(dict): key:(chains_id_a,chains_id_b)</p>
<blockquote>
<div><dl class="simple">
<dt>val:[selection_a,selection_b,</dt><dd><p>res_list_a,res_list_b,rot,trans,rmsd]</p>
</dd>
</dl>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>msg (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_search.shortcut_1">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_search.</code><code class="sig-name descname">shortcut_1</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hierarchy</span></em>, <em class="sig-param"><span class="n">chains_info</span></em>, <em class="sig-param"><span class="n">chain_similarity_threshold</span></em>, <em class="sig-param"><span class="n">chain_max_rmsd</span></em>, <em class="sig-param"><span class="n">log</span></em>, <em class="sig-param"><span class="n">residue_match_radius</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_search.shortcut_1" title="Permalink to this definition">¶</a></dt>
<dd><p>Checking the case when whole hierarchy was produced by multiplication of
molecule with BIOMT or MTRIX matrices (or both). In this case we are expecting
to find identical chains with 0 rmsd between them.</p>
</dd></dl>

</div>
<div class="section" id="module-mmtbx.ncs.ncs_utils">
<span id="mmtbx-ncs-ncs-utils-module"></span><h2><a class="toc-backref" href="#id7">mmtbx.ncs.ncs_utils module</a><a class="headerlink" href="#module-mmtbx.ncs.ncs_utils" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mmtbx.ncs.ncs_utils.apply_transforms">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_utils.</code><code class="sig-name descname">apply_transforms</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncs_coordinates</span></em>, <em class="sig-param"><span class="n">ncs_restraints_group_list</span></em>, <em class="sig-param"><span class="n">total_asu_length</span></em>, <em class="sig-param"><span class="n">extended_ncs_selection</span></em>, <em class="sig-param"><span class="n">round_coordinates</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">center_of_coordinates</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.apply_transforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply transformation to ncs_coordinates,
and round the results if round_coordinates is True</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ncs_coordinates</strong> (<em>flex.vec3</em>) – master ncs coordinates</p></li>
<li><p><strong>ncs_restraints_group_list</strong> – list of ncs_restraint_group objects</p></li>
<li><p><strong>total_asu_length</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.int" title="scitbx.array_family.flex.int"><em>int</em></a>) – Complete ASU length
extended_ncs_selection (flex.size_t): master ncs and non-ncs related parts</p></li>
<li><p><strong>center_of_coordinates</strong> – when not None, contains the center of coordinate of
the master for each ncs copy</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Asymmetric or biological unit parts that are related via</dt><dd><p>ncs operations</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.vec3_double" title="scitbx.array_family.flex.vec3_double">flex.vec3_double</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_utils.compute_transform_grad">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_utils.</code><code class="sig-name descname">compute_transform_grad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">grad_wrt_xyz</span></em>, <em class="sig-param"><span class="n">xyz_asu</span></em>, <em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">ncs_restraints_group_list</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.compute_transform_grad" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX
XXX Consider making it method of class_ncs_restraints_group_list
XXX</p>
<p>Compute gradient in respect to the rotation angles and the translation
vectors. R = Rx(the)Ry(psi)Rz(phi)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grad_wrt_xyz</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="scitbx.array_family.flex.double"><em>flex.double</em></a>) – gradients with respect to xyz.</p></li>
<li><p><strong>ncs_restraints_group_list</strong> – list containing ncs_restraint_group objects</p></li>
<li><p><strong>transforms_obj</strong> (<em>ncs_group_object</em>) – containing information in rotation
matrices and to which chains they apply</p></li>
<li><p><strong>xyz_asu</strong> (<em>flex.vec3</em>) – The coordinates sites cart of the complete ASU</p></li>
<li><p><strong>x</strong> (<em>flex double</em>) – The angles, in the form
(theta_1,psi_1,phi_1,tx_1,ty_1,tz_1,..
theta_n,psi_n,phi_n,tx_n/s,ty_n/s,tz_n/s)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the gradient</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>g (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="scitbx.array_family.flex.double">flex.double</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_utils.flip_atoms_in_ncs_groups">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_utils.</code><code class="sig-name descname">flip_atoms_in_ncs_groups</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hierarchy</span></em>, <em class="sig-param"><span class="n">ncs_restraints_group_list</span></em>, <em class="sig-param"><span class="n">mon_lib_srv</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.flip_atoms_in_ncs_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX
XXX not used, only tested. May have some value.
XXX
This function will actually modify hierarchy by making necessary flips
in ncs-related residues. Flip will be made by exchanging atom coordinates.
Will make all copies consistent with master.</p>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_utils.get_list_of_best_ncs_copy_map_correlation">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_utils.</code><code class="sig-name descname">get_list_of_best_ncs_copy_map_correlation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ncs_groups</span></em>, <em class="sig-param"><span class="n">xray_structure</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fmodel</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">map_data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">d_min</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.get_list_of_best_ncs_copy_map_correlation" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the copy with best map correlation in each ncs group</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>list of the copy with the best map correlation.</dt><dd><p>(the master copy is 0)</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>best_list (list of int)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_utils.get_refine_selection">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_utils.</code><code class="sig-name descname">get_refine_selection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">refine_selection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">number_of_atoms</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.get_refine_selection" title="Permalink to this definition">¶</a></dt>
<dd><p>populate refine_selection with all atoms if no selection is given</p>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_utils.get_weight">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_utils.</code><code class="sig-name descname">get_weight</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fmodel</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">restraints_manager</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sites</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">transformations</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">u_iso</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ncs_restraints_group_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">refine_selection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">minimized_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.get_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates weights for refinements by slightly shaking the minimized
parameters and taking the ratio:
(restraint manager grad norm / parameters gradient norm)</p>
<p>When calling this function during refinement macro cycle, the minimized
object, “minimized_obj” , may contains fmodel, restraints_manager,
refinement type info (sites, transformations, u_iso) and
ncs_restraints_group_list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fmodel</strong> – F-model object</p></li>
<li><p><strong>restraints_manager</strong> – Restraints manager object</p></li>
<li><p><strong>sites</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.bool" title="scitbx.array_family.flex.bool"><em>bool</em></a>) – Refine by sites</p></li>
<li><p><strong>u_iso</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.bool" title="scitbx.array_family.flex.bool"><em>bool</em></a>) – Refine using u_iso</p></li>
<li><p><strong>transformations</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.bool" title="scitbx.array_family.flex.bool"><em>bool</em></a>) – Refine using transformations
rotations, translations (matrix objects):</p></li>
<li><p><strong>ncs_restraints_group_list</strong> – list of ncs_restraint_group objects</p></li>
<li><p><strong>refine_selection</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t"><em>flex.size_t</em></a>) – selection of all ncs related copies and
non ncs related parts to be included in selection (to be refined)</p></li>
<li><p><strong>minimized_obj</strong> – Minimization object containing all the other
parameters above</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>weight (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.int" title="scitbx.array_family.flex.int">int</a>)</p>
</dd>
</dl>
<p>Example:
&gt;&gt;&gt;get_weight(minimized_obj=minimized_obj)</p>
<p>or</p>
<dl class="simple">
<dt>&gt;&gt;&gt;get_weight(fmodel=fmodel,</dt><dd><p>restraints_manager=grm,
sites=sites,
transformations=transformations,
u_iso=u_iso,
ncs_restraints_group_list=ncs_restraints_group_list,
refine_selection=refine_selection)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_utils.remove_items_from_selection">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_utils.</code><code class="sig-name descname">remove_items_from_selection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">selection</span></em>, <em class="sig-param"><span class="n">remove</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.remove_items_from_selection" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a set of atoms from “selection”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>selection</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t"><em>flex.size_t</em></a>) – atom selection</p></li>
<li><p><strong>remove</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t"><em>flex.size_t</em></a>) – atoms to remove from selection</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>modified atom selection</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t">flex.size_t</a>)</p>
</dd>
</dl>
<dl class="simple">
<dt>Examples::</dt><dd><p>&gt;&gt;&gt;a = flex.size_t([1,2,5,6,4])
&gt;&gt;&gt;r = flex.size_t([2,5])
&gt;&gt;&gt;s = remove_items_from_selection(a,r,10)
&gt;&gt;&gt;list(s)
[1,6,4]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_utils.rotation_to_angles">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_utils.</code><code class="sig-name descname">rotation_to_angles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rotation</span></em>, <em class="sig-param"><span class="n">deg</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.rotation_to_angles" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the rotation angles around the axis x,y,z for rotation r
Such that r = Rx*Ry*Rz
Those angles are the Tait-Bryan angles form of Euler angles</p>
<p>Note that typically there are two solutions, and this function will return
only one. In the case that cos(beta) == 0 there are infinite number of
solutions, the function returns the one where gamma = 0</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r</strong> – (flex.double) of the form (Rxx,Rxy,Rxz,Ryx,Ryy,Ryz,Rzx,Rzy,Rzz)</p></li>
<li><p><strong>deg</strong> – When False use radians, when True use degrees</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(alpha, beta, gamma) rotation angles around the x,y,z</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="mmtbx.validation.html#mmtbx.validation.restraints.angles" title="mmtbx.validation.restraints.angles">angles</a> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="scitbx.array_family.flex.double">flex.double</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_utils.selected_positions">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_utils.</code><code class="sig-name descname">selected_positions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">selection</span></em>, <em class="sig-param"><span class="n">positions</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.selected_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns only the selected indices in the positions specified in “positions”
keeping the order</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>selection</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t"><em>flex.size_t</em></a>) – Atoms selection</p></li>
<li><p><strong>positions</strong> (<a class="reference internal" href="../cctbx/cctbx.miller.html#cctbx.miller.set" title="cctbx.miller.set"><em>set</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a>) – the allowed positions in the selections</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(selected atoms, atoms, not selected)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t">flex.size_t</a>, <a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.size_t" title="scitbx.array_family.flex.size_t">flex.size_t</a>)</p>
</dd>
</dl>
<dl class="simple">
<dt>Examples::</dt><dd><p>&gt;&gt;&gt;a = flex.size_t([1,2,5,6,4])
&gt;&gt;&gt;pos = {0,3,4}
&gt;&gt;&gt;s,d = selected_positions(a,pos)
&gt;&gt;&gt;list(s)
[1,6,4]
&gt;&gt;&gt;list(d)
[2,5]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mmtbx.ncs.ncs_utils.shake_transformations">
<code class="sig-prename descclassname">mmtbx.ncs.ncs_utils.</code><code class="sig-name descname">shake_transformations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">shake_angles_sigma</span><span class="o">=</span><span class="default_value">0.035</span></em>, <em class="sig-param"><span class="n">shake_translation_sigma</span><span class="o">=</span><span class="default_value">0.5</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mmtbx.ncs.ncs_utils.shake_transformations" title="Permalink to this definition">¶</a></dt>
<dd><p>XXX
XXX Used here in get_weight().
XXX Not clear what relation MTRIX have to this function at all…
XXX</p>
<p>Shake rotation matrices and translation vectors of a rotation matrices and
translation vectors from the MTRIX records in a PDB file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="scitbx.array_family.flex.double"><em>flex.double</em></a>) – [(alpha_1,beta_1,gamma_1,Tx_1/s,Ty_1/s,Tz_1/s)…]</p></li>
<li><p><strong>shake_angles_sigma</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – the sigma (in radians) of the random gaussian
shaking of the rotation angles</p></li>
<li><p><strong>shake_translation_sigma</strong> (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.float" title="scitbx.array_family.flex.float"><em>float</em></a>) – the sigma (in angstrom) of the random
gaussian shaking of the translation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The shaken x</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>new_x (<a class="reference internal" href="../scitbx/scitbx.array_family.html#scitbx.array_family.flex.double" title="scitbx.array_family.flex.double">flex.double</a>)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mmtbx.ncs">
<span id="module-contents"></span><h2><a class="toc-backref" href="#id8">Module contents</a><a class="headerlink" href="#module-mmtbx.ncs" title="Permalink to this headline">¶</a></h2>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">mmtbx.ncs</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ligands">mmtbx.ncs.ligands module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ncs">mmtbx.ncs.ncs module</a></li>
<li><a class="reference internal" href="#mmtbx-ncs-restraints-module">mmtbx.ncs.restraints module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ncs_search">mmtbx.ncs.ncs_search module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs.ncs_utils">mmtbx.ncs.ncs_utils module</a></li>
<li><a class="reference internal" href="#module-mmtbx.ncs">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="mmtbx.monomer_library.html"
                        title="previous chapter">mmtbx.monomer_library package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mmtbx.pdbtools.html"
                        title="next chapter">mmtbx.pdbtools - model manipulation utilities</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/mmtbx/mmtbx.ncs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mmtbx.pdbtools.html" title="mmtbx.pdbtools - model manipulation utilities"
             >next</a> |</li>
        <li class="right" >
          <a href="mmtbx.monomer_library.html" title="mmtbx.monomer_library package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CCTBX Developer documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="mmtbx.html" >mmtbx - macromolecular crystallography</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">mmtbx.ncs</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, University of California.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.0.
    </div>
  </body>
</html>